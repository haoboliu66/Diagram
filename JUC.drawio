<mxfile host="app.diagrams.net" agent="Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/131.0.0.0 Safari/537.36" version="25.0.3">
  <diagram name="Page-1" id="iqe3As87bchgCNZe354T">
    <mxGraphModel dx="3447" dy="951" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="sthXmhu9q4Z8TcD6EFiC-140" value="" style="rounded=0;whiteSpace=wrap;html=1;fontFamily=Helvetica;fontSize=11;fontColor=default;labelBackgroundColor=default;" vertex="1" parent="1">
          <mxGeometry x="1165" y="3490" width="3645" height="1890" as="geometry" />
        </mxCell>
        <mxCell id="sthXmhu9q4Z8TcD6EFiC-106" value="" style="rounded=0;whiteSpace=wrap;html=1;fontFamily=Helvetica;fontSize=11;fontColor=default;labelBackgroundColor=default;" vertex="1" parent="1">
          <mxGeometry x="3143" y="6350" width="652" height="200" as="geometry" />
        </mxCell>
        <mxCell id="sthXmhu9q4Z8TcD6EFiC-100" value="" style="rounded=0;whiteSpace=wrap;html=1;fontFamily=Helvetica;fontSize=11;fontColor=default;labelBackgroundColor=default;" vertex="1" parent="1">
          <mxGeometry x="4115" y="6170" width="405" height="220" as="geometry" />
        </mxCell>
        <mxCell id="FncKr-vtPmwALynlk0jB-17" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;curved=1;" parent="1" source="FncKr-vtPmwALynlk0jB-15" target="FncKr-vtPmwALynlk0jB-16" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="FncKr-vtPmwALynlk0jB-15" value="" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1195" y="3500" width="1015" height="190" as="geometry" />
        </mxCell>
        <mxCell id="B9yCGMFFLdolYYt0oWos-13" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="1" vertex="1">
          <mxGeometry x="1480" y="3230" width="595" height="100" as="geometry" />
        </mxCell>
        <mxCell id="99BcAxhjOU1GVthHqTRR-21" value="CPU" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-445" y="3530" width="306" height="70" as="geometry" />
        </mxCell>
        <mxCell id="UsoG7qOwd3O0ct9gbPl3-1" value="" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1960" y="160" width="390" height="270" as="geometry" />
        </mxCell>
        <mxCell id="UsoG7qOwd3O0ct9gbPl3-2" value="线程" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1990" y="235" width="80" height="180" as="geometry" />
        </mxCell>
        <mxCell id="UsoG7qOwd3O0ct9gbPl3-5" value="" style="shape=flexArrow;endArrow=classic;html=1;rounded=0;" parent="1" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1870" y="200" as="sourcePoint" />
            <mxPoint x="1940" y="200" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="UsoG7qOwd3O0ct9gbPl3-6" value="工作窃取队列" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="1" vertex="1">
          <mxGeometry x="1990" y="235" width="80" height="30" as="geometry" />
        </mxCell>
        <mxCell id="UsoG7qOwd3O0ct9gbPl3-9" value="线程" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="2120" y="235" width="80" height="180" as="geometry" />
        </mxCell>
        <mxCell id="UsoG7qOwd3O0ct9gbPl3-10" value="工作窃取队列" style="rounded=0;whiteSpace=wrap;html=1;fontSize=11;fillColor=#fff2cc;strokeColor=#d6b656;" parent="1" vertex="1">
          <mxGeometry x="2120" y="235" width="80" height="30" as="geometry" />
        </mxCell>
        <mxCell id="UsoG7qOwd3O0ct9gbPl3-11" value="线程" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="2240" y="235" width="80" height="180" as="geometry" />
        </mxCell>
        <mxCell id="UsoG7qOwd3O0ct9gbPl3-12" value="工作窃取队列" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="1" vertex="1">
          <mxGeometry x="2240" y="235" width="80" height="30" as="geometry" />
        </mxCell>
        <mxCell id="UsoG7qOwd3O0ct9gbPl3-13" value="" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1800" y="490" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="UsoG7qOwd3O0ct9gbPl3-14" value="" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1860" y="490" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="UsoG7qOwd3O0ct9gbPl3-15" value="" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1920" y="490" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="UsoG7qOwd3O0ct9gbPl3-17" value="为了优化性能, 避免多个线程获取任务时发生竞争, 工作窃取队列使用双端列队, 当前线程从top放入, 其他线程从base拿走" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;" parent="1" vertex="1">
          <mxGeometry x="2015" y="480" width="305" height="40" as="geometry" />
        </mxCell>
        <mxCell id="UsoG7qOwd3O0ct9gbPl3-18" value="使用CAS避免多个竞争获取同一个&amp;nbsp;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;" parent="1" vertex="1">
          <mxGeometry x="2005" y="545" width="280" height="40" as="geometry" />
        </mxCell>
        <mxCell id="UsoG7qOwd3O0ct9gbPl3-19" value="" style="shape=flexArrow;endArrow=classic;html=1;rounded=0;" parent="1" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1829.62" y="430" as="sourcePoint" />
            <mxPoint x="1829.62" y="480" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="UsoG7qOwd3O0ct9gbPl3-20" value="" style="shape=flexArrow;endArrow=classic;html=1;rounded=0;" parent="1" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1958.23" y="584" as="sourcePoint" />
            <mxPoint x="1958" y="529" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="UsoG7qOwd3O0ct9gbPl3-21" value="top" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;" parent="1" vertex="1">
          <mxGeometry x="1934" y="585" width="50" height="25" as="geometry" />
        </mxCell>
        <mxCell id="UsoG7qOwd3O0ct9gbPl3-22" value="base" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;" parent="1" vertex="1">
          <mxGeometry x="1805" y="405" width="50" height="25" as="geometry" />
        </mxCell>
        <mxCell id="UsoG7qOwd3O0ct9gbPl3-23" value="会有多个线程从base指针窃取, base指针" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;" parent="1" vertex="1">
          <mxGeometry x="2015" y="610" width="240" height="30" as="geometry" />
        </mxCell>
        <mxCell id="UsoG7qOwd3O0ct9gbPl3-35" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;curved=1;" parent="1" source="UsoG7qOwd3O0ct9gbPl3-24" target="UsoG7qOwd3O0ct9gbPl3-33" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="UsoG7qOwd3O0ct9gbPl3-24" value="外部线程提交任务" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;" parent="1" vertex="1">
          <mxGeometry x="1790" y="160" width="100" height="20" as="geometry" />
        </mxCell>
        <mxCell id="UsoG7qOwd3O0ct9gbPl3-25" value="外部提交队列" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#CCE5FF;" parent="1" vertex="1">
          <mxGeometry x="1990" y="180" width="80" height="30" as="geometry" />
        </mxCell>
        <mxCell id="UsoG7qOwd3O0ct9gbPl3-26" value="外部提交队列" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#CCE5FF;" parent="1" vertex="1">
          <mxGeometry x="2120" y="180" width="80" height="30" as="geometry" />
        </mxCell>
        <mxCell id="UsoG7qOwd3O0ct9gbPl3-27" value="外部提交队列" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#CCE5FF;" parent="1" vertex="1">
          <mxGeometry x="2240" y="180" width="80" height="30" as="geometry" />
        </mxCell>
        <mxCell id="UsoG7qOwd3O0ct9gbPl3-29" value="ForkJoinWorkerThread" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="1970" y="350" width="120" height="20" as="geometry" />
        </mxCell>
        <mxCell id="UsoG7qOwd3O0ct9gbPl3-30" value="ForkJoinWorkerThread" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="2100" y="350" width="120" height="20" as="geometry" />
        </mxCell>
        <mxCell id="UsoG7qOwd3O0ct9gbPl3-31" value="ForkJoinWorkerThread" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;" parent="1" vertex="1">
          <mxGeometry x="2227.5" y="350" width="120" height="20" as="geometry" />
        </mxCell>
        <mxCell id="UsoG7qOwd3O0ct9gbPl3-38" style="edgeStyle=orthogonalEdgeStyle;shape=connector;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;labelBackgroundColor=default;strokeColor=default;fontFamily=Helvetica;fontSize=11;fontColor=default;endArrow=classic;" parent="1" source="UsoG7qOwd3O0ct9gbPl3-33" target="UsoG7qOwd3O0ct9gbPl3-37" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="UsoG7qOwd3O0ct9gbPl3-33" value="提交时如何决定提交到哪个队列" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;" parent="1" vertex="1">
          <mxGeometry x="1940" y="70" width="100" height="20" as="geometry" />
        </mxCell>
        <mxCell id="UsoG7qOwd3O0ct9gbPl3-37" value="&quot;负载均衡&quot; - Hashing" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="2067.5" y="110" width="185" height="30" as="geometry" />
        </mxCell>
        <mxCell id="UsoG7qOwd3O0ct9gbPl3-39" value="两个队列读多写少, 优先考虑读性能， 因此使用数组实现" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;fontFamily=Helvetica;fontColor=default;" parent="1" vertex="1">
          <mxGeometry x="2467.5" y="207.5" width="192.5" height="30" as="geometry" />
        </mxCell>
        <mxCell id="UsoG7qOwd3O0ct9gbPl3-41" value="工作窃取队列" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="1" vertex="1">
          <mxGeometry x="2490" y="250" width="80" height="30" as="geometry" />
        </mxCell>
        <mxCell id="UsoG7qOwd3O0ct9gbPl3-42" value="外部提交队列" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#CCE5FF;" parent="1" vertex="1">
          <mxGeometry x="2570" y="250" width="80" height="30" as="geometry" />
        </mxCell>
        <mxCell id="UsoG7qOwd3O0ct9gbPl3-43" value="工作窃取队列" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="1" vertex="1">
          <mxGeometry x="2650.5" y="250" width="80" height="30" as="geometry" />
        </mxCell>
        <mxCell id="UsoG7qOwd3O0ct9gbPl3-44" value="用奇偶index来区分数组当前元素归属于哪类队列" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;fontFamily=Helvetica;fontColor=default;" parent="1" vertex="1">
          <mxGeometry x="2450" y="300" width="260" height="30" as="geometry" />
        </mxCell>
        <mxCell id="UsoG7qOwd3O0ct9gbPl3-45" value="外部提交队列" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#CCE5FF;" parent="1" vertex="1">
          <mxGeometry x="2410" y="250" width="80" height="30" as="geometry" />
        </mxCell>
        <mxCell id="dpeUAHpxACgYPMOwfueQ-1" value="并发专题" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="100" y="80" width="630" height="40" as="geometry" />
        </mxCell>
        <mxCell id="dpeUAHpxACgYPMOwfueQ-6" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;curved=1;" parent="1" source="dpeUAHpxACgYPMOwfueQ-2" target="dpeUAHpxACgYPMOwfueQ-3" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="dpeUAHpxACgYPMOwfueQ-7" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;curved=1;" parent="1" source="dpeUAHpxACgYPMOwfueQ-2" target="dpeUAHpxACgYPMOwfueQ-4" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="dpeUAHpxACgYPMOwfueQ-8" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;curved=1;" parent="1" source="dpeUAHpxACgYPMOwfueQ-2" target="dpeUAHpxACgYPMOwfueQ-5" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="dpeUAHpxACgYPMOwfueQ-2" value="知识" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="110" y="230" width="80" height="30" as="geometry" />
        </mxCell>
        <mxCell id="dpeUAHpxACgYPMOwfueQ-10" style="edgeStyle=orthogonalEdgeStyle;shape=connector;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;labelBackgroundColor=default;strokeColor=default;align=center;verticalAlign=middle;fontFamily=Helvetica;fontSize=11;fontColor=default;endArrow=classic;" parent="1" source="dpeUAHpxACgYPMOwfueQ-3" target="dpeUAHpxACgYPMOwfueQ-9" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="dpeUAHpxACgYPMOwfueQ-3" value="知识点" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="260" y="165" width="100" height="45" as="geometry" />
        </mxCell>
        <mxCell id="dpeUAHpxACgYPMOwfueQ-13" style="edgeStyle=orthogonalEdgeStyle;shape=connector;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;labelBackgroundColor=default;strokeColor=default;align=center;verticalAlign=middle;fontFamily=Helvetica;fontSize=11;fontColor=default;endArrow=classic;" parent="1" source="dpeUAHpxACgYPMOwfueQ-4" target="dpeUAHpxACgYPMOwfueQ-9" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="dpeUAHpxACgYPMOwfueQ-4" value="知识点" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="260" y="222.5" width="100" height="45" as="geometry" />
        </mxCell>
        <mxCell id="dpeUAHpxACgYPMOwfueQ-14" style="edgeStyle=orthogonalEdgeStyle;shape=connector;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;labelBackgroundColor=default;strokeColor=default;align=center;verticalAlign=middle;fontFamily=Helvetica;fontSize=11;fontColor=default;endArrow=classic;" parent="1" source="dpeUAHpxACgYPMOwfueQ-5" target="dpeUAHpxACgYPMOwfueQ-9" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="dpeUAHpxACgYPMOwfueQ-5" value="知识点" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="260" y="285" width="100" height="45" as="geometry" />
        </mxCell>
        <mxCell id="dpeUAHpxACgYPMOwfueQ-9" value="混沌树" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="485" y="235" width="79" height="30" as="geometry" />
        </mxCell>
        <mxCell id="dpeUAHpxACgYPMOwfueQ-15" value="并发的本质: 多个CPU同时操作了同一个数据" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;fontFamily=Helvetica;fontColor=default;" parent="1" vertex="1">
          <mxGeometry x="90" y="410" width="230" height="30" as="geometry" />
        </mxCell>
        <mxCell id="dpeUAHpxACgYPMOwfueQ-16" value="atomicity: 一段操作, 要么全不执行, 那么全执行完不能被中断" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;fontFamily=Helvetica;fontColor=default;" parent="1" vertex="1">
          <mxGeometry x="385" y="410" width="300" height="30" as="geometry" />
        </mxCell>
        <mxCell id="dpeUAHpxACgYPMOwfueQ-22" style="edgeStyle=orthogonalEdgeStyle;shape=connector;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;labelBackgroundColor=default;strokeColor=default;align=center;verticalAlign=middle;fontFamily=Helvetica;fontSize=11;fontColor=default;endArrow=classic;" parent="1" source="dpeUAHpxACgYPMOwfueQ-17" target="dpeUAHpxACgYPMOwfueQ-18" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="dpeUAHpxACgYPMOwfueQ-23" style="edgeStyle=orthogonalEdgeStyle;shape=connector;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;labelBackgroundColor=default;strokeColor=default;align=center;verticalAlign=middle;fontFamily=Helvetica;fontSize=11;fontColor=default;endArrow=classic;" parent="1" source="dpeUAHpxACgYPMOwfueQ-17" target="dpeUAHpxACgYPMOwfueQ-19" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="dpeUAHpxACgYPMOwfueQ-17" value="CPU如何支持原子性操作" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;fontFamily=Helvetica;fontColor=default;" parent="1" vertex="1">
          <mxGeometry x="100" y="510" width="150" height="30" as="geometry" />
        </mxCell>
        <mxCell id="dpeUAHpxACgYPMOwfueQ-18" value="锁总线" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;fontFamily=Helvetica;fontColor=default;" parent="1" vertex="1">
          <mxGeometry x="330" y="485" width="80" height="30" as="geometry" />
        </mxCell>
        <mxCell id="dpeUAHpxACgYPMOwfueQ-21" value="" style="edgeStyle=orthogonalEdgeStyle;shape=connector;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;labelBackgroundColor=default;strokeColor=default;align=center;verticalAlign=middle;fontFamily=Helvetica;fontSize=11;fontColor=default;endArrow=classic;" parent="1" source="dpeUAHpxACgYPMOwfueQ-19" target="dpeUAHpxACgYPMOwfueQ-20" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="dpeUAHpxACgYPMOwfueQ-19" value="锁缓存行" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;fontFamily=Helvetica;fontColor=default;" parent="1" vertex="1">
          <mxGeometry x="330" y="540" width="80" height="30" as="geometry" />
        </mxCell>
        <mxCell id="dpeUAHpxACgYPMOwfueQ-20" value="锁一个变量的虚拟地址" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;fontFamily=Helvetica;fontColor=default;" parent="1" vertex="1">
          <mxGeometry x="460" y="540" width="130" height="30" as="geometry" />
        </mxCell>
        <mxCell id="dpeUAHpxACgYPMOwfueQ-24" value="CPU提供指令级别的原子性操作" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;fontFamily=Helvetica;fontColor=default;" parent="1" vertex="1">
          <mxGeometry x="280" y="590" width="180" height="30" as="geometry" />
        </mxCell>
        <mxCell id="dpeUAHpxACgYPMOwfueQ-25" value="CPU" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="498.75" y="880" width="70" height="40" as="geometry" />
        </mxCell>
        <mxCell id="dpeUAHpxACgYPMOwfueQ-26" value="OS" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="498.75" y="820" width="180" height="40" as="geometry" />
        </mxCell>
        <mxCell id="dpeUAHpxACgYPMOwfueQ-27" value="App" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="606" y="760" width="70" height="40" as="geometry" />
        </mxCell>
        <mxCell id="dpeUAHpxACgYPMOwfueQ-28" value="CPU单个指令级别的原子性操作" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;fontFamily=Helvetica;fontColor=default;" parent="1" vertex="1">
          <mxGeometry x="746" y="910" width="180" height="30" as="geometry" />
        </mxCell>
        <mxCell id="dpeUAHpxACgYPMOwfueQ-29" value="基于CPU的单个原子指令实现原子性操作" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;fontFamily=Helvetica;fontColor=default;" parent="1" vertex="1">
          <mxGeometry x="740" y="835" width="214" height="30" as="geometry" />
        </mxCell>
        <mxCell id="dpeUAHpxACgYPMOwfueQ-30" value="App" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="500" y="760" width="70" height="40" as="geometry" />
        </mxCell>
        <mxCell id="dpeUAHpxACgYPMOwfueQ-31" value="CPU" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="611.25" y="880" width="70" height="40" as="geometry" />
        </mxCell>
        <mxCell id="dpeUAHpxACgYPMOwfueQ-32" value="Monitor" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;fontFamily=Helvetica;fontColor=default;" parent="1" vertex="1">
          <mxGeometry x="245" y="840" width="60" height="20" as="geometry" />
        </mxCell>
        <mxCell id="dpeUAHpxACgYPMOwfueQ-33" value="lock; cmpxchg" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;fontFamily=Helvetica;fontColor=default;" parent="1" vertex="1">
          <mxGeometry x="135" y="1370" width="110" height="20" as="geometry" />
        </mxCell>
        <mxCell id="dpeUAHpxACgYPMOwfueQ-36" value="" style="edgeStyle=orthogonalEdgeStyle;shape=connector;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;labelBackgroundColor=default;strokeColor=default;align=center;verticalAlign=middle;fontFamily=Helvetica;fontSize=11;fontColor=default;endArrow=classic;" parent="1" source="dpeUAHpxACgYPMOwfueQ-35" target="dpeUAHpxACgYPMOwfueQ-33" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="dpeUAHpxACgYPMOwfueQ-35" value="CAS" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;fontFamily=Helvetica;fontColor=default;" parent="1" vertex="1">
          <mxGeometry x="160" y="1310" width="60" height="20" as="geometry" />
        </mxCell>
        <mxCell id="dpeUAHpxACgYPMOwfueQ-37" value="SMP架构" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;fontFamily=Helvetica;fontColor=default;" parent="1" vertex="1">
          <mxGeometry x="130" y="1100" width="60" height="20" as="geometry" />
        </mxCell>
        <mxCell id="dpeUAHpxACgYPMOwfueQ-38" value="NUMA架构" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;fontFamily=Helvetica;fontColor=default;" parent="1" vertex="1">
          <mxGeometry x="240" y="1100" width="60" height="20" as="geometry" />
        </mxCell>
        <mxCell id="dpeUAHpxACgYPMOwfueQ-39" value="mechanism for carrying out locked atomic operations:&lt;br&gt;1. Guaranteed atomic operations&lt;br&gt;2. Bus locking, using LOCK signal and the LOCK instruction prefix&lt;br&gt;3. Cache coherency protocols (MESI)" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;fontFamily=Helvetica;fontColor=default;" parent="1" vertex="1">
          <mxGeometry x="460" y="1075" width="333" height="70" as="geometry" />
        </mxCell>
        <mxCell id="dpeUAHpxACgYPMOwfueQ-42" value="" style="edgeStyle=orthogonalEdgeStyle;shape=connector;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;labelBackgroundColor=default;strokeColor=default;align=center;verticalAlign=middle;fontFamily=Helvetica;fontSize=11;fontColor=default;endArrow=classic;" parent="1" source="dpeUAHpxACgYPMOwfueQ-40" target="dpeUAHpxACgYPMOwfueQ-41" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="dpeUAHpxACgYPMOwfueQ-40" value="ABA问题" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=14;fontFamily=Helvetica;fontColor=default;fontStyle=1" parent="1" vertex="1">
          <mxGeometry x="309" y="1314" width="70" height="20" as="geometry" />
        </mxCell>
        <mxCell id="HeV-wAqHhQqOec4LPYSm-4" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="dpeUAHpxACgYPMOwfueQ-41" target="dpeUAHpxACgYPMOwfueQ-43" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="dpeUAHpxACgYPMOwfueQ-41" value="引入一个counter, 改了就+1" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;fontFamily=Helvetica;fontColor=default;" parent="1" vertex="1">
          <mxGeometry x="417" y="1314" width="140" height="20" as="geometry" />
        </mxCell>
        <mxCell id="dpeUAHpxACgYPMOwfueQ-47" value="" style="edgeStyle=orthogonalEdgeStyle;shape=connector;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;labelBackgroundColor=default;strokeColor=default;align=center;verticalAlign=middle;fontFamily=Helvetica;fontSize=11;fontColor=default;endArrow=classic;" parent="1" source="dpeUAHpxACgYPMOwfueQ-43" target="dpeUAHpxACgYPMOwfueQ-46" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="dpeUAHpxACgYPMOwfueQ-43" value="AtomicStampedReference" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;fontFamily=Helvetica;fontColor=default;" parent="1" vertex="1">
          <mxGeometry x="599" y="1314" width="140" height="20" as="geometry" />
        </mxCell>
        <mxCell id="dpeUAHpxACgYPMOwfueQ-46" value="把counter和要修改的变量打包" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;fontFamily=Helvetica;fontColor=default;" parent="1" vertex="1">
          <mxGeometry x="739" y="1250" width="160" height="20" as="geometry" />
        </mxCell>
        <mxCell id="dpeUAHpxACgYPMOwfueQ-48" value="ClassLoader: 线程上下文加载器的二义性问题?" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;fontFamily=Helvetica;fontColor=default;" parent="1" vertex="1">
          <mxGeometry x="1385" y="690" width="140" height="40" as="geometry" />
        </mxCell>
        <mxCell id="dpeUAHpxACgYPMOwfueQ-49" value="java.sql.DriverManager" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;fontFamily=Helvetica;fontColor=default;" parent="1" vertex="1">
          <mxGeometry x="1435" y="771" width="140" height="40" as="geometry" />
        </mxCell>
        <mxCell id="dpeUAHpxACgYPMOwfueQ-51" value="" style="edgeStyle=orthogonalEdgeStyle;shape=connector;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;labelBackgroundColor=default;strokeColor=default;align=center;verticalAlign=middle;fontFamily=Helvetica;fontSize=11;fontColor=default;endArrow=classic;" parent="1" source="dpeUAHpxACgYPMOwfueQ-50" target="dpeUAHpxACgYPMOwfueQ-49" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="dpeUAHpxACgYPMOwfueQ-50" value="rt.jar" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;fontFamily=Helvetica;fontColor=default;" parent="1" vertex="1">
          <mxGeometry x="1325" y="771" width="70" height="40" as="geometry" />
        </mxCell>
        <mxCell id="dpeUAHpxACgYPMOwfueQ-52" value="是由bootloader加载的, 而JDBC的驱动由第三方实现, 所以通过线程上下文加载器告诉bootloader去加载该类, 因为bootloader不知道这个类在哪加载" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;fontFamily=Helvetica;fontColor=default;" parent="1" vertex="1">
          <mxGeometry x="1265" y="811" width="440" height="39" as="geometry" />
        </mxCell>
        <mxCell id="HeV-wAqHhQqOec4LPYSm-2" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="HeV-wAqHhQqOec4LPYSm-1" target="dpeUAHpxACgYPMOwfueQ-33" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="HeV-wAqHhQqOec4LPYSm-1" value="CPU" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;" parent="1" vertex="1">
          <mxGeometry x="30" y="1365" width="70" height="30" as="geometry" />
        </mxCell>
        <mxCell id="HeV-wAqHhQqOec4LPYSm-3" value="" style="shape=flexArrow;endArrow=classic;html=1;rounded=0;" parent="1" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="227" y="1323.5" as="sourcePoint" />
            <mxPoint x="297" y="1323.5" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="HeV-wAqHhQqOec4LPYSm-5" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="1130" y="1650" width="190" height="20" as="geometry" />
        </mxCell>
        <mxCell id="HeV-wAqHhQqOec4LPYSm-11" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="1130" y="1670" width="190" height="20" as="geometry" />
        </mxCell>
        <mxCell id="HeV-wAqHhQqOec4LPYSm-12" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="1130" y="1690" width="190" height="20" as="geometry" />
        </mxCell>
        <mxCell id="HeV-wAqHhQqOec4LPYSm-16" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="HeV-wAqHhQqOec4LPYSm-13" target="HeV-wAqHhQqOec4LPYSm-15" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="HeV-wAqHhQqOec4LPYSm-13" value="若不同的Cell在一个缓存行中, 此时又会退化为原来的CAS操作, 于是我们希望将他们分布在不同缓存行中, 利用锁分散的机制增加并行度, 如何做? 缓存行填充, e.g. 缓存行大小64byte, int只用4byte, 于是要填充60byte" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;fontFamily=Helvetica;fontColor=default;" parent="1" vertex="1">
          <mxGeometry x="1350" y="1660" width="410" height="50" as="geometry" />
        </mxCell>
        <mxCell id="HeV-wAqHhQqOec4LPYSm-15" value="Java中, 通过@Contended由编译器或运行时自动填充" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;fontFamily=Helvetica;fontColor=default;" parent="1" vertex="1">
          <mxGeometry x="1420.25" y="1740" width="269.5" height="30" as="geometry" />
        </mxCell>
        <mxCell id="HeV-wAqHhQqOec4LPYSm-17" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="1130" y="1710" width="190" height="20" as="geometry" />
        </mxCell>
        <mxCell id="HeV-wAqHhQqOec4LPYSm-18" value="cache line" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;fontFamily=Helvetica;fontColor=default;" parent="1" vertex="1">
          <mxGeometry x="1175" y="1620" width="90" height="20" as="geometry" />
        </mxCell>
        <mxCell id="HeV-wAqHhQqOec4LPYSm-19" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" parent="1" vertex="1">
          <mxGeometry x="1200" y="1650" width="30" height="20" as="geometry" />
        </mxCell>
        <mxCell id="HeV-wAqHhQqOec4LPYSm-20" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" parent="1" vertex="1">
          <mxGeometry x="1200" y="1670" width="30" height="20" as="geometry" />
        </mxCell>
        <mxCell id="HeV-wAqHhQqOec4LPYSm-21" value="缓存行锁代替总线锁的唯一条件: 变量已在缓存行中" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;fontFamily=Helvetica;fontColor=default;" parent="1" vertex="1">
          <mxGeometry x="1420.25" y="1630" width="269.75" height="20" as="geometry" />
        </mxCell>
        <mxCell id="HeV-wAqHhQqOec4LPYSm-22" value="CPU1" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;" parent="1" vertex="1">
          <mxGeometry x="1289" y="1300" width="70" height="30" as="geometry" />
        </mxCell>
        <mxCell id="HeV-wAqHhQqOec4LPYSm-24" value="CPU2" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;" parent="1" vertex="1">
          <mxGeometry x="1420" y="1300" width="70" height="30" as="geometry" />
        </mxCell>
        <mxCell id="HeV-wAqHhQqOec4LPYSm-25" value="CPU3" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;" parent="1" vertex="1">
          <mxGeometry x="1549" y="1300" width="70" height="30" as="geometry" />
        </mxCell>
        <mxCell id="HeV-wAqHhQqOec4LPYSm-28" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="1" vertex="1">
          <mxGeometry x="1549" y="1330" width="70" height="50" as="geometry" />
        </mxCell>
        <mxCell id="HeV-wAqHhQqOec4LPYSm-29" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="1" vertex="1">
          <mxGeometry x="1420" y="1330" width="70" height="50" as="geometry" />
        </mxCell>
        <mxCell id="HeV-wAqHhQqOec4LPYSm-30" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="1" vertex="1">
          <mxGeometry x="1289" y="1330" width="70" height="50" as="geometry" />
        </mxCell>
        <mxCell id="HeV-wAqHhQqOec4LPYSm-31" value="变量A" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="1294" y="1355" width="60" height="20" as="geometry" />
        </mxCell>
        <mxCell id="HeV-wAqHhQqOec4LPYSm-32" value="变量A" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="1425" y="1355" width="60" height="20" as="geometry" />
        </mxCell>
        <mxCell id="HeV-wAqHhQqOec4LPYSm-33" value="变量A" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="1554" y="1355" width="60" height="20" as="geometry" />
        </mxCell>
        <mxCell id="HeV-wAqHhQqOec4LPYSm-37" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="HeV-wAqHhQqOec4LPYSm-35" target="HeV-wAqHhQqOec4LPYSm-36" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="HeV-wAqHhQqOec4LPYSm-35" value="当变量A被加载到多个CPU cache中时, 执行lock操作将会使用MESI协议来保证只有一个CPU可以对变量A进行cmpxchg" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;fontFamily=Helvetica;fontColor=default;" parent="1" vertex="1">
          <mxGeometry x="1265" y="1405" width="409" height="40" as="geometry" />
        </mxCell>
        <mxCell id="HeV-wAqHhQqOec4LPYSm-39" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;curved=1;" parent="1" source="HeV-wAqHhQqOec4LPYSm-36" target="HeV-wAqHhQqOec4LPYSm-38" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="HeV-wAqHhQqOec4LPYSm-36" value="随着CPU数量增多, 大量CPU的CAS失败, 进行无谓的自旋" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;fontFamily=Helvetica;fontColor=default;" parent="1" vertex="1">
          <mxGeometry x="1320" y="1480" width="299" height="25" as="geometry" />
        </mxCell>
        <mxCell id="HeV-wAqHhQqOec4LPYSm-38" value="锁分散" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=16;fontFamily=Helvetica;fontColor=default;fontStyle=1" parent="1" vertex="1">
          <mxGeometry x="1199" y="1576" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="r9cip8CiFLFCaYMpcU3F-21" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="SonHGdceE0Zbm2Z1TKrk-5" target="r9cip8CiFLFCaYMpcU3F-20" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="SonHGdceE0Zbm2Z1TKrk-5" value="volatile" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontStyle=1;fontSize=16;fontColor=#FF3333;" parent="1" vertex="1">
          <mxGeometry x="621" y="2040" width="99" height="40" as="geometry" />
        </mxCell>
        <mxCell id="SonHGdceE0Zbm2Z1TKrk-32" value="mmIO" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="824" y="1980" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="SonHGdceE0Zbm2Z1TKrk-33" value="CPU乱序执行现象" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;" parent="1" vertex="1">
          <mxGeometry x="786" y="2610" width="110" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AeaUYEnInn6TyFFDgCMk-7" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="TZ7YPI2pEZnhK35bZtsi-1" target="AeaUYEnInn6TyFFDgCMk-6" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="TZ7YPI2pEZnhK35bZtsi-1" value="CPU在执行指令时, 没有按照编码顺序执行的现象, i.e. 指令之间相对顺序发生了改变" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;fontFamily=Helvetica;fontColor=default;" parent="1" vertex="1">
          <mxGeometry x="915" y="2615" width="310" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AeaUYEnInn6TyFFDgCMk-1" value="简化了重排序的行为, 告诉你编码规则, 至于底层怎么实现是JVM开发者的问题" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;fontFamily=Helvetica;fontColor=default;" parent="1" vertex="1">
          <mxGeometry x="1693" y="2050" width="310" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AeaUYEnInn6TyFFDgCMk-3" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="AeaUYEnInn6TyFFDgCMk-2" target="AeaUYEnInn6TyFFDgCMk-1" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="AeaUYEnInn6TyFFDgCMk-2" value="JMM" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1549" y="2050" width="100" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AeaUYEnInn6TyFFDgCMk-5" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="AeaUYEnInn6TyFFDgCMk-4" target="AeaUYEnInn6TyFFDgCMk-2" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="AeaUYEnInn6TyFFDgCMk-4" value="Java" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1549" y="1990" width="100" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AeaUYEnInn6TyFFDgCMk-9" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" target="AeaUYEnInn6TyFFDgCMk-8" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="1070" y="2700" as="sourcePoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="AeaUYEnInn6TyFFDgCMk-6" value="CPU和编译器都可能导致重排序" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;fontFamily=Helvetica;fontColor=default;" parent="1" vertex="1">
          <mxGeometry x="982.5" y="2680" width="175" height="30" as="geometry" />
        </mxCell>
        <mxCell id="B9yCGMFFLdolYYt0oWos-2" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="AeaUYEnInn6TyFFDgCMk-8" target="2cmjIInxjt0Y60UCOrVg-3" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="AeaUYEnInn6TyFFDgCMk-8" value="特定的CPU和编译器带来的重排序行为都不太一样" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;fontFamily=Helvetica;fontColor=default;" parent="1" vertex="1">
          <mxGeometry x="945" y="2740" width="250" height="30" as="geometry" />
        </mxCell>
        <mxCell id="B9yCGMFFLdolYYt0oWos-10" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;curved=1;" parent="1" source="AeaUYEnInn6TyFFDgCMk-10" target="B9yCGMFFLdolYYt0oWos-9" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="B9yCGMFFLdolYYt0oWos-11" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;curved=1;" parent="1" source="AeaUYEnInn6TyFFDgCMk-10" target="B9yCGMFFLdolYYt0oWos-8" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="AeaUYEnInn6TyFFDgCMk-10" value="研究范围限定于: Intel 和 gcc" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;fontFamily=Helvetica;fontColor=default;textShadow=0;" parent="1" vertex="1">
          <mxGeometry x="1230" y="2740" width="160" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AeaUYEnInn6TyFFDgCMk-14" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="AeaUYEnInn6TyFFDgCMk-12" target="AeaUYEnInn6TyFFDgCMk-13" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="AeaUYEnInn6TyFFDgCMk-12" value="屏障" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="817" y="3092.5" width="100" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AeaUYEnInn6TyFFDgCMk-16" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;curved=1;" parent="1" source="AeaUYEnInn6TyFFDgCMk-13" target="AeaUYEnInn6TyFFDgCMk-15" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="AeaUYEnInn6TyFFDgCMk-13" value="隔离指令" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;fontFamily=Helvetica;fontColor=default;" parent="1" vertex="1">
          <mxGeometry x="986" y="3092.5" width="70" height="30" as="geometry" />
        </mxCell>
        <mxCell id="AeaUYEnInn6TyFFDgCMk-19" style="edgeStyle=orthogonalEdgeStyle;shape=connector;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;labelBackgroundColor=default;strokeColor=default;align=center;verticalAlign=middle;fontFamily=Helvetica;fontSize=11;fontColor=default;endArrow=classic;" parent="1" source="AeaUYEnInn6TyFFDgCMk-15" target="AeaUYEnInn6TyFFDgCMk-17" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="AeaUYEnInn6TyFFDgCMk-15" value="STORE A&lt;br&gt;屏障&lt;br&gt;STORE B" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;fontFamily=Helvetica;fontColor=default;" parent="1" vertex="1">
          <mxGeometry x="1106" y="3080" width="90" height="55" as="geometry" />
        </mxCell>
        <mxCell id="AeaUYEnInn6TyFFDgCMk-21" value="" style="edgeStyle=orthogonalEdgeStyle;shape=connector;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;labelBackgroundColor=default;strokeColor=default;align=center;verticalAlign=middle;fontFamily=Helvetica;fontSize=11;fontColor=default;endArrow=classic;" parent="1" source="AeaUYEnInn6TyFFDgCMk-17" target="AeaUYEnInn6TyFFDgCMk-20" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="AeaUYEnInn6TyFFDgCMk-17" value="隔离屏障两边的指令, 使他们满足该屏障所能保证的意义" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;fontFamily=Helvetica;fontColor=default;" parent="1" vertex="1">
          <mxGeometry x="1298.5" y="3112.5" width="285" height="40" as="geometry" />
        </mxCell>
        <mxCell id="AeaUYEnInn6TyFFDgCMk-20" value="那么有哪几种屏障, 某种屏障要保证的意义是什么?" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;fontFamily=Helvetica;fontColor=default;" parent="1" vertex="1">
          <mxGeometry x="1306" y="3172.5" width="270" height="30" as="geometry" />
        </mxCell>
        <mxCell id="99BcAxhjOU1GVthHqTRR-3" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;curved=1;" parent="1" source="99BcAxhjOU1GVthHqTRR-1" target="99BcAxhjOU1GVthHqTRR-2" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="99BcAxhjOU1GVthHqTRR-13" style="edgeStyle=orthogonalEdgeStyle;shape=connector;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;labelBackgroundColor=default;strokeColor=default;align=center;verticalAlign=middle;fontFamily=Helvetica;fontSize=11;fontColor=default;endArrow=classic;" parent="1" source="99BcAxhjOU1GVthHqTRR-1" target="99BcAxhjOU1GVthHqTRR-12" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="99BcAxhjOU1GVthHqTRR-15" style="edgeStyle=orthogonalEdgeStyle;shape=connector;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;labelBackgroundColor=default;strokeColor=default;align=center;verticalAlign=middle;fontFamily=Helvetica;fontSize=11;fontColor=default;endArrow=classic;" parent="1" source="99BcAxhjOU1GVthHqTRR-1" target="99BcAxhjOU1GVthHqTRR-14" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="99BcAxhjOU1GVthHqTRR-1" value="barriers" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="652" y="3382.5" width="79" height="30" as="geometry" />
        </mxCell>
        <mxCell id="99BcAxhjOU1GVthHqTRR-2" value="store barriers" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="856" y="3252.5" width="100" height="30" as="geometry" />
        </mxCell>
        <mxCell id="B9yCGMFFLdolYYt0oWos-14" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;curved=1;" parent="1" source="99BcAxhjOU1GVthHqTRR-4" target="B9yCGMFFLdolYYt0oWos-13" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="99BcAxhjOU1GVthHqTRR-4" value="保证2个或2组写操作的相对顺序, store barrier之后的写指令不会重排序到barrier前的写指令之前" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;fontFamily=Helvetica;fontColor=default;" parent="1" vertex="1">
          <mxGeometry x="966" y="3245" width="474" height="45" as="geometry" />
        </mxCell>
        <mxCell id="99BcAxhjOU1GVthHqTRR-6" value="前提: 所有的内存操作指令, 等价于向内存提交一组 操作队列" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;fontFamily=Helvetica;fontColor=default;" parent="1" vertex="1">
          <mxGeometry x="1565" y="3340" width="310" height="30" as="geometry" />
        </mxCell>
        <mxCell id="99BcAxhjOU1GVthHqTRR-11" value="" style="edgeStyle=orthogonalEdgeStyle;shape=connector;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;labelBackgroundColor=default;strokeColor=#d6b656;align=center;verticalAlign=middle;fontFamily=Helvetica;fontSize=11;fontColor=default;endArrow=classic;fillColor=#fff2cc;" parent="1" source="99BcAxhjOU1GVthHqTRR-7" target="99BcAxhjOU1GVthHqTRR-8" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="99BcAxhjOU1GVthHqTRR-7" value="STORE A&lt;br&gt;&lt;br&gt;STORE BARRIER&lt;br&gt;&lt;br&gt;STORE B" style="text;html=1;strokeColor=#d6b656;fillColor=#fff2cc;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;fontFamily=Helvetica;" parent="1" vertex="1">
          <mxGeometry x="1511" y="3242.5" width="94" height="70" as="geometry" />
        </mxCell>
        <mxCell id="99BcAxhjOU1GVthHqTRR-10" value="" style="edgeStyle=orthogonalEdgeStyle;shape=connector;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;labelBackgroundColor=default;strokeColor=#d6b656;align=center;verticalAlign=middle;fontFamily=Helvetica;fontSize=11;fontColor=default;endArrow=classic;fillColor=#fff2cc;" parent="1" source="99BcAxhjOU1GVthHqTRR-8" target="99BcAxhjOU1GVthHqTRR-9" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="99BcAxhjOU1GVthHqTRR-8" value="barrier保证A和B的提交顺序" style="text;html=1;strokeColor=#d6b656;fillColor=#fff2cc;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;fontFamily=Helvetica;" parent="1" vertex="1">
          <mxGeometry x="1645" y="3262.5" width="150" height="30" as="geometry" />
        </mxCell>
        <mxCell id="99BcAxhjOU1GVthHqTRR-9" value="CPU看到了B的最新值, 一定看到了A的最新值" style="text;html=1;strokeColor=#d6b656;fillColor=#fff2cc;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;fontFamily=Helvetica;" parent="1" vertex="1">
          <mxGeometry x="1826" y="3262.5" width="235" height="30" as="geometry" />
        </mxCell>
        <mxCell id="99BcAxhjOU1GVthHqTRR-12" value="load barriers" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="858.5" y="3382.5" width="100" height="30" as="geometry" />
        </mxCell>
        <mxCell id="99BcAxhjOU1GVthHqTRR-14" value="full barriers" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="856" y="3512.5" width="100" height="30" as="geometry" />
        </mxCell>
        <mxCell id="99BcAxhjOU1GVthHqTRR-16" value="只保证读操作" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;fontFamily=Helvetica;fontColor=default;" parent="1" vertex="1">
          <mxGeometry x="968.5" y="3385" width="80" height="27.5" as="geometry" />
        </mxCell>
        <mxCell id="99BcAxhjOU1GVthHqTRR-17" value="同时保证读和写" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;fontFamily=Helvetica;fontColor=default;" parent="1" vertex="1">
          <mxGeometry x="966" y="3512.5" width="100" height="30" as="geometry" />
        </mxCell>
        <mxCell id="99BcAxhjOU1GVthHqTRR-18" value="虚拟地址" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-429" y="3560" width="100" height="30" as="geometry" />
        </mxCell>
        <mxCell id="99BcAxhjOU1GVthHqTRR-19" value="物理地址" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-260" y="3560" width="105" height="30" as="geometry" />
        </mxCell>
        <mxCell id="99BcAxhjOU1GVthHqTRR-20" value="cache line" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-419" y="3630" width="260" height="30" as="geometry" />
        </mxCell>
        <mxCell id="99BcAxhjOU1GVthHqTRR-22" value="每个进程虚拟地址一样, 如果用虚拟地址查cache line, 可能发生冲突" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;fontFamily=Helvetica;fontColor=default;" parent="1" vertex="1">
          <mxGeometry x="-614" y="3660" width="145" height="40" as="geometry" />
        </mxCell>
        <mxCell id="99BcAxhjOU1GVthHqTRR-23" value="Direct-mapped caches" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;fontFamily=Helvetica;fontColor=default;" parent="1" vertex="1">
          <mxGeometry x="-46.25" y="3610" width="112.5" height="30" as="geometry" />
        </mxCell>
        <mxCell id="99BcAxhjOU1GVthHqTRR-24" value="Set associative caches" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;fontFamily=Helvetica;fontColor=default;" parent="1" vertex="1">
          <mxGeometry x="-60" y="3640" width="140" height="30" as="geometry" />
        </mxCell>
        <mxCell id="99BcAxhjOU1GVthHqTRR-25" value="Fully associative caches" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;fontFamily=Helvetica;fontColor=default;" parent="1" vertex="1">
          <mxGeometry x="-60" y="3670" width="140" height="30" as="geometry" />
        </mxCell>
        <mxCell id="GM-Ud_aDfbjV712TQ6Kv-4" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;curved=1;" parent="1" source="GM-Ud_aDfbjV712TQ6Kv-1" target="GM-Ud_aDfbjV712TQ6Kv-3" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="GM-Ud_aDfbjV712TQ6Kv-5" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;curved=1;" parent="1" source="GM-Ud_aDfbjV712TQ6Kv-1" target="GM-Ud_aDfbjV712TQ6Kv-2" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="GM-Ud_aDfbjV712TQ6Kv-1" value="virtual address查询cache的问题" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;fontFamily=Helvetica;fontColor=default;" parent="1" vertex="1">
          <mxGeometry x="-860" y="3780" width="180" height="40" as="geometry" />
        </mxCell>
        <mxCell id="GM-Ud_aDfbjV712TQ6Kv-2" value="ambiguity" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;fontFamily=Helvetica;fontColor=default;" parent="1" vertex="1">
          <mxGeometry x="-609" y="3770" width="80" height="20" as="geometry" />
        </mxCell>
        <mxCell id="GM-Ud_aDfbjV712TQ6Kv-3" value="alias" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;fontFamily=Helvetica;fontColor=default;" parent="1" vertex="1">
          <mxGeometry x="-603.5" y="3810" width="69" height="20" as="geometry" />
        </mxCell>
        <UserObject label="https://zhuanlan.zhihu.com/p/107096130" link="https://zhuanlan.zhihu.com/p/107096130" id="GM-Ud_aDfbjV712TQ6Kv-6">
          <mxCell style="text;whiteSpace=wrap;fontSize=11;fontFamily=Helvetica;fontColor=default;" parent="1" vertex="1">
            <mxGeometry x="-870" y="3730" width="220" height="30" as="geometry" />
          </mxCell>
        </UserObject>
        <mxCell id="PCTluO6xD0Zs3hzz5Vkr-1" value="第7节, 第8节" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="-609" y="3580" width="110" height="35" as="geometry" />
        </mxCell>
        <mxCell id="r9cip8CiFLFCaYMpcU3F-2" value="CPU1" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;" parent="1" vertex="1">
          <mxGeometry x="2040" y="1302.5" width="100" height="30" as="geometry" />
        </mxCell>
        <mxCell id="r9cip8CiFLFCaYMpcU3F-5" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="1" vertex="1">
          <mxGeometry x="2040" y="1332.5" width="100" height="50" as="geometry" />
        </mxCell>
        <mxCell id="r9cip8CiFLFCaYMpcU3F-8" value="A" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="2048" y="1347.5" width="40" height="25" as="geometry" />
        </mxCell>
        <mxCell id="r9cip8CiFLFCaYMpcU3F-9" value="B" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="2094" y="1347.5" width="40" height="25" as="geometry" />
        </mxCell>
        <mxCell id="r9cip8CiFLFCaYMpcU3F-10" value="CPU2" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;" parent="1" vertex="1">
          <mxGeometry x="2200" y="1302.5" width="100" height="30" as="geometry" />
        </mxCell>
        <mxCell id="r9cip8CiFLFCaYMpcU3F-11" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="1" vertex="1">
          <mxGeometry x="2200" y="1332.5" width="100" height="50" as="geometry" />
        </mxCell>
        <mxCell id="r9cip8CiFLFCaYMpcU3F-12" value="A" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="2208" y="1347.5" width="40" height="25" as="geometry" />
        </mxCell>
        <mxCell id="r9cip8CiFLFCaYMpcU3F-13" value="B" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="2254" y="1347.5" width="40" height="25" as="geometry" />
        </mxCell>
        <mxCell id="r9cip8CiFLFCaYMpcU3F-14" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="1" vertex="1">
          <mxGeometry x="2040" y="1407.5" width="260" height="50" as="geometry" />
        </mxCell>
        <mxCell id="r9cip8CiFLFCaYMpcU3F-15" value="A" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="2125" y="1420" width="40" height="25" as="geometry" />
        </mxCell>
        <mxCell id="r9cip8CiFLFCaYMpcU3F-16" value="B" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="2171" y="1420" width="40" height="25" as="geometry" />
        </mxCell>
        <mxCell id="r9cip8CiFLFCaYMpcU3F-17" value="Memory" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;fontFamily=Helvetica;fontColor=default;" parent="1" vertex="1">
          <mxGeometry x="2043" y="1420.5" width="40" height="25" as="geometry" />
        </mxCell>
        <mxCell id="r9cip8CiFLFCaYMpcU3F-19" value="CPU1写A和B的两种机制:&amp;nbsp;&lt;br style=&quot;font-size: 12px;&quot;&gt;1. 直接把最新值写入内存, 然后告诉CPU2缓存失效&lt;br style=&quot;font-size: 12px;&quot;&gt;2. 直接把最新值写入内存, 然后最新值给CPU2, 似的CPU缓存行中的A和B更新为最新, 此时CPU2无须去内存重新读取" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=12;fontFamily=Helvetica;fontColor=default;" parent="1" vertex="1">
          <mxGeometry x="2340" y="1310" width="360" height="90" as="geometry" />
        </mxCell>
        <mxCell id="r9cip8CiFLFCaYMpcU3F-20" value="每个原子性的变量, 也即多个线程共享的都加上volatile, 原因何在？" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontStyle=1;fontSize=14;fontColor=#FF3333;" parent="1" vertex="1">
          <mxGeometry x="774" y="2040" width="436" height="40" as="geometry" />
        </mxCell>
        <mxCell id="r9cip8CiFLFCaYMpcU3F-22" value="JVM" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="845" y="2100" width="100" height="30" as="geometry" />
        </mxCell>
        <mxCell id="r9cip8CiFLFCaYMpcU3F-23" value="OS" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="845" y="2150" width="100" height="30" as="geometry" />
        </mxCell>
        <mxCell id="r9cip8CiFLFCaYMpcU3F-24" value="CPU (Intel)" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="845" y="2200" width="100" height="30" as="geometry" />
        </mxCell>
        <mxCell id="r9cip8CiFLFCaYMpcU3F-26" value="CPU 1&lt;br&gt;A == 1&lt;br&gt;A = 3&lt;div&gt;B = 4&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="810" y="2310" width="70" height="100" as="geometry" />
        </mxCell>
        <mxCell id="r9cip8CiFLFCaYMpcU3F-27" value="CPU2&lt;br&gt;B == 2&lt;br&gt;x = A&lt;br&gt;y = B" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="920" y="2310" width="67" height="100" as="geometry" />
        </mxCell>
        <mxCell id="r9cip8CiFLFCaYMpcU3F-30" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="r9cip8CiFLFCaYMpcU3F-28" target="r9cip8CiFLFCaYMpcU3F-29" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="r9cip8CiFLFCaYMpcU3F-28" value="所有CPU的操作, 等价于向内存提交一组访问序列而已" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="1013" y="2480" width="305" height="30" as="geometry" />
        </mxCell>
        <mxCell id="r9cip8CiFLFCaYMpcU3F-29" value="指令以何种顺序读内存, 以何种顺序写内存" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="1351.5" y="2480" width="240.5" height="30" as="geometry" />
        </mxCell>
        <mxCell id="hfoLQT2eYCwfNi6susUt-2" value="JUC LongAdder" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="1340" y="1560" width="140" height="30" as="geometry" />
        </mxCell>
        <mxCell id="9GSOo7D7u0mSWAOutGfX-1" value="STORE A 3&lt;br&gt;&lt;br&gt;STORE B 4&lt;br&gt;&lt;br&gt;LOAD A&lt;br&gt;&lt;br&gt;LOAD B" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="1025" y="2310" width="110" height="120" as="geometry" />
        </mxCell>
        <mxCell id="9GSOo7D7u0mSWAOutGfX-2" value="STORE A 3&lt;br&gt;&lt;br&gt;LOAD A&lt;br&gt;&lt;br&gt;STORE B 4&lt;br&gt;&lt;br&gt;LOAD B" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="1170" y="2310" width="110" height="120" as="geometry" />
        </mxCell>
        <mxCell id="9GSOo7D7u0mSWAOutGfX-5" value="LOAD A&lt;br&gt;&lt;br&gt;STORE A 3&lt;br&gt;&lt;br&gt;STORE B 4&lt;br&gt;&lt;br&gt;LOAD B" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="1294" y="2310" width="110" height="120" as="geometry" />
        </mxCell>
        <mxCell id="9GSOo7D7u0mSWAOutGfX-6" value="LOAD A&lt;br&gt;&lt;br&gt;LOAD B&lt;br&gt;&lt;br&gt;STORE A 3&lt;br&gt;&lt;br&gt;STORE B 4" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="1425" y="2310" width="110" height="120" as="geometry" />
        </mxCell>
        <mxCell id="9GSOo7D7u0mSWAOutGfX-7" value="{3,4}" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="1045" y="2270" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="9GSOo7D7u0mSWAOutGfX-8" value="{3,4}" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="1195" y="2270" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="9GSOo7D7u0mSWAOutGfX-9" value="{1,4}" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="1320" y="2270" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="9GSOo7D7u0mSWAOutGfX-10" value="{1,2}" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="1450" y="2270" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="9GSOo7D7u0mSWAOutGfX-11" value="" style="shape=curlyBracket;whiteSpace=wrap;html=1;rounded=1;flipH=1;labelPosition=right;verticalLabelPosition=middle;align=left;verticalAlign=middle;rotation=90;" parent="1" vertex="1">
          <mxGeometry x="1270" y="2220" width="20" height="480" as="geometry" />
        </mxCell>
        <mxCell id="9GSOo7D7u0mSWAOutGfX-13" value="什么导致了这个乱序执行现象?" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;fontFamily=Helvetica;fontColor=default;" parent="1" vertex="1">
          <mxGeometry x="779" y="2680" width="175" height="30" as="geometry" />
        </mxCell>
        <mxCell id="9GSOo7D7u0mSWAOutGfX-14" value="CPU乱序执行的前提是, 不能打破逻辑, 如果变量或逻辑之间没有依赖, 那么才可以乱序" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;fontFamily=Helvetica;fontColor=default;" parent="1" vertex="1">
          <mxGeometry x="705.38" y="2560" width="271.25" height="40" as="geometry" />
        </mxCell>
        <mxCell id="2cmjIInxjt0Y60UCOrVg-2" value="JVM是一个中间层, 引入自己的逻辑来屏蔽这些C开发多线程多种复杂的情况, 简化了导致重排序的行为; 这个就是JMM的由来" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="953.75" y="2871" width="232.5" height="52" as="geometry" />
        </mxCell>
        <mxCell id="B9yCGMFFLdolYYt0oWos-5" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="2cmjIInxjt0Y60UCOrVg-3" target="2cmjIInxjt0Y60UCOrVg-2" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="2cmjIInxjt0Y60UCOrVg-3" value="C, C++需要处理的重排序情况比较复杂, 导致多线程开发的复杂性" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="942.5" y="2810" width="255" height="30" as="geometry" />
        </mxCell>
        <mxCell id="B9yCGMFFLdolYYt0oWos-6" value="JMM约束了Java的行为, Java开发者按照规则编程即可, 具体的实现由JVM开发者负责" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;fontFamily=Helvetica;fontColor=default;" parent="1" vertex="1">
          <mxGeometry x="1220" y="2878" width="245" height="38" as="geometry" />
        </mxCell>
        <mxCell id="B9yCGMFFLdolYYt0oWos-8" value="Intel manual" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;fontFamily=Helvetica;fontColor=default;textShadow=0;" parent="1" vertex="1">
          <mxGeometry x="1444" y="2710" width="86" height="30" as="geometry" />
        </mxCell>
        <mxCell id="B9yCGMFFLdolYYt0oWos-9" value="gcc manual" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;fontFamily=Helvetica;fontColor=default;textShadow=0;" parent="1" vertex="1">
          <mxGeometry x="1444.25" y="2770" width="81.5" height="30" as="geometry" />
        </mxCell>
        <mxCell id="B9yCGMFFLdolYYt0oWos-12" value="由于OS要对接不同的CPU, 那么必然要满足不同的CPU提供的屏障实现要求, 因此通过宏定义来适配不同的CPU" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;fontFamily=Helvetica;fontColor=default;" parent="1" vertex="1">
          <mxGeometry x="1291" y="3060" width="285" height="40" as="geometry" />
        </mxCell>
        <mxCell id="FncKr-vtPmwALynlk0jB-1" value="Memory" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1307.5" y="3620" width="320" height="40" as="geometry" />
        </mxCell>
        <mxCell id="FncKr-vtPmwALynlk0jB-2" value="CPU1" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1374" y="3530" width="61" height="42" as="geometry" />
        </mxCell>
        <mxCell id="FncKr-vtPmwALynlk0jB-3" value="CPU2" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1480" y="3530" width="61" height="42" as="geometry" />
        </mxCell>
        <mxCell id="FncKr-vtPmwALynlk0jB-4" value="顺序写了" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="1306" y="3542" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="FncKr-vtPmwALynlk0jB-9" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;curved=1;" parent="1" source="FncKr-vtPmwALynlk0jB-5" target="FncKr-vtPmwALynlk0jB-8" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="FncKr-vtPmwALynlk0jB-5" value="不按顺序读" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="1541" y="3542.5" width="86.5" height="30" as="geometry" />
        </mxCell>
        <mxCell id="FncKr-vtPmwALynlk0jB-6" value="A" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#f8cecc;strokeColor=#b85450;" parent="1" vertex="1">
          <mxGeometry x="1506.5" y="3625" width="30" height="30" as="geometry" />
        </mxCell>
        <mxCell id="FncKr-vtPmwALynlk0jB-7" value="B" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#f8cecc;strokeColor=#b85450;" parent="1" vertex="1">
          <mxGeometry x="1553.5" y="3625" width="30" height="30" as="geometry" />
        </mxCell>
        <mxCell id="FncKr-vtPmwALynlk0jB-12" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="FncKr-vtPmwALynlk0jB-8" target="FncKr-vtPmwALynlk0jB-11" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="FncKr-vtPmwALynlk0jB-8" value="可能会导致某一个值无法读到最新的" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="1690" y="3590" width="210" height="28" as="geometry" />
        </mxCell>
        <mxCell id="FncKr-vtPmwALynlk0jB-10" value="LOAD B操作重排序到 LOAD A 之前" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="1689.75" y="3550" width="220.25" height="28" as="geometry" />
        </mxCell>
        <mxCell id="FncKr-vtPmwALynlk0jB-11" value="需要读屏障, 保证LOAD A一定发生在LOAD B 前" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="1934" y="3590" width="280" height="28" as="geometry" />
        </mxCell>
        <mxCell id="FncKr-vtPmwALynlk0jB-13" value="写屏障, 保证了 STORE A一定发生在STORE B 前" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="1202.5" y="3590" width="280" height="28" as="geometry" />
        </mxCell>
        <mxCell id="-FcQdrV0vnWtqaeG2UPR-57" style="edgeStyle=orthogonalEdgeStyle;shape=connector;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=default;align=center;verticalAlign=middle;fontFamily=Helvetica;fontSize=11;fontColor=default;labelBackgroundColor=default;endArrow=classic;" parent="1" source="FncKr-vtPmwALynlk0jB-16" target="-FcQdrV0vnWtqaeG2UPR-56" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="FncKr-vtPmwALynlk0jB-16" value="以上是抽象概念. 实际在CPU中呢?" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="1610" y="3740" width="185" height="30" as="geometry" />
        </mxCell>
        <mxCell id="-FcQdrV0vnWtqaeG2UPR-2" value="" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1201" y="3820" width="909" height="260" as="geometry" />
        </mxCell>
        <mxCell id="-FcQdrV0vnWtqaeG2UPR-3" value="Memory" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1315" y="4010" width="320" height="40" as="geometry" />
        </mxCell>
        <mxCell id="-FcQdrV0vnWtqaeG2UPR-4" value="CPU1" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1380" y="3850" width="61" height="42" as="geometry" />
        </mxCell>
        <mxCell id="-FcQdrV0vnWtqaeG2UPR-5" value="CPU2" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1486" y="3850" width="61" height="42" as="geometry" />
        </mxCell>
        <mxCell id="-FcQdrV0vnWtqaeG2UPR-6" value="顺序写了" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="1314" y="3890" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="-FcQdrV0vnWtqaeG2UPR-9" value="A" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#f8cecc;strokeColor=#b85450;" parent="1" vertex="1">
          <mxGeometry x="1514" y="4015" width="30" height="30" as="geometry" />
        </mxCell>
        <mxCell id="-FcQdrV0vnWtqaeG2UPR-10" value="B" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#f8cecc;strokeColor=#b85450;" parent="1" vertex="1">
          <mxGeometry x="1561" y="4015" width="30" height="30" as="geometry" />
        </mxCell>
        <mxCell id="-FcQdrV0vnWtqaeG2UPR-15" value="写屏障, 保证了 STORE A一定发生在STORE B 前" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="1210" y="3980" width="280" height="28" as="geometry" />
        </mxCell>
        <mxCell id="-FcQdrV0vnWtqaeG2UPR-17" value="cache" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1380" y="3914" width="61" height="42" as="geometry" />
        </mxCell>
        <mxCell id="-FcQdrV0vnWtqaeG2UPR-18" value="cache" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1486" y="3914" width="61" height="42" as="geometry" />
        </mxCell>
        <mxCell id="-FcQdrV0vnWtqaeG2UPR-19" value="A" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#d5e8d4;strokeColor=#82b366;" parent="1" vertex="1">
          <mxGeometry x="1371.5" y="3940" width="30" height="30" as="geometry" />
        </mxCell>
        <mxCell id="-FcQdrV0vnWtqaeG2UPR-20" value="B" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#d5e8d4;strokeColor=#82b366;" parent="1" vertex="1">
          <mxGeometry x="1418.5" y="3940" width="30" height="30" as="geometry" />
        </mxCell>
        <mxCell id="-FcQdrV0vnWtqaeG2UPR-21" value="A" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#f8cecc;strokeColor=#b85450;" parent="1" vertex="1">
          <mxGeometry x="1478" y="3940" width="30" height="30" as="geometry" />
        </mxCell>
        <mxCell id="-FcQdrV0vnWtqaeG2UPR-22" value="B" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#f8cecc;strokeColor=#b85450;" parent="1" vertex="1">
          <mxGeometry x="1525" y="3940" width="30" height="30" as="geometry" />
        </mxCell>
        <mxCell id="-FcQdrV0vnWtqaeG2UPR-23" value="缓存的一致性?" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="1591" y="3920" width="91" height="30" as="geometry" />
        </mxCell>
        <mxCell id="-FcQdrV0vnWtqaeG2UPR-24" value="CPU" style="rounded=0;whiteSpace=wrap;html=1;verticalAlign=top;" parent="1" vertex="1">
          <mxGeometry x="-539.5" y="3930" width="220" height="70" as="geometry" />
        </mxCell>
        <mxCell id="-FcQdrV0vnWtqaeG2UPR-26" value="virtual addr" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-539.5" y="3962" width="103" height="38" as="geometry" />
        </mxCell>
        <mxCell id="-FcQdrV0vnWtqaeG2UPR-27" value="physical addr" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-422.5" y="3962" width="103" height="38" as="geometry" />
        </mxCell>
        <mxCell id="-FcQdrV0vnWtqaeG2UPR-28" value="Cache Line" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-538" y="4030" width="220" height="30" as="geometry" />
        </mxCell>
        <mxCell id="-FcQdrV0vnWtqaeG2UPR-29" value="用哪个地址去查cache?" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="-501.5" y="4000" width="144" height="30" as="geometry" />
        </mxCell>
        <mxCell id="-FcQdrV0vnWtqaeG2UPR-41" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;curved=1;" parent="1" source="-FcQdrV0vnWtqaeG2UPR-30" target="-FcQdrV0vnWtqaeG2UPR-39" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="-FcQdrV0vnWtqaeG2UPR-42" style="edgeStyle=orthogonalEdgeStyle;shape=connector;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=default;align=center;verticalAlign=middle;fontFamily=Helvetica;fontSize=11;fontColor=default;labelBackgroundColor=default;endArrow=classic;" parent="1" source="-FcQdrV0vnWtqaeG2UPR-30" target="-FcQdrV0vnWtqaeG2UPR-40" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="-FcQdrV0vnWtqaeG2UPR-30" value="virtual addr" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-630" y="4170" width="103" height="38" as="geometry" />
        </mxCell>
        <mxCell id="-FcQdrV0vnWtqaeG2UPR-37" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;curved=1;" parent="1" source="-FcQdrV0vnWtqaeG2UPR-31" target="-FcQdrV0vnWtqaeG2UPR-36" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="sthXmhu9q4Z8TcD6EFiC-138" style="edgeStyle=orthogonalEdgeStyle;shape=connector;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=default;align=center;verticalAlign=middle;fontFamily=Helvetica;fontSize=11;fontColor=default;labelBackgroundColor=default;endArrow=classic;" edge="1" parent="1" source="-FcQdrV0vnWtqaeG2UPR-31" target="-FcQdrV0vnWtqaeG2UPR-32">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="-FcQdrV0vnWtqaeG2UPR-31" value="进程的虚拟地址空间是相同的, 但是两个相同的虚拟地址映射到不同的物理地址, 可能进程A用地址12345读数据到了cache, 然后切换了进程B, 碰巧进程B也用地址12345读cache, 访问到的是进程A读的数据" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="-326" y="4110" width="456" height="60" as="geometry" />
        </mxCell>
        <mxCell id="-FcQdrV0vnWtqaeG2UPR-32" value="但是如果发生context switch, 必须刷cpu的缓存, 避免cache的访问冲突" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="190" y="4150" width="340" height="30" as="geometry" />
        </mxCell>
        <mxCell id="-FcQdrV0vnWtqaeG2UPR-34" value="physical addr" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-627.5" y="4320" width="103" height="38" as="geometry" />
        </mxCell>
        <mxCell id="-FcQdrV0vnWtqaeG2UPR-35" value="物理地址是唯一的, 用物理内存查cache, 那么必须要通过MMU -&amp;gt; page table进行地址转换, 为了加速这个过程, 引入TLB" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="-513" y="4325" width="646" height="30" as="geometry" />
        </mxCell>
        <mxCell id="-FcQdrV0vnWtqaeG2UPR-36" value="节省了查page table的时间" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="180" y="4100" width="180" height="30" as="geometry" />
        </mxCell>
        <mxCell id="-FcQdrV0vnWtqaeG2UPR-38" value="共享页, 两个不同的虚拟地址指向同一个物理地址, 但是2个虚拟地址的index不同, ie.指向不同的缓存行, 所以一个物理地址可能被加载到不同的缓存行中" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="-326" y="4210" width="456" height="50" as="geometry" />
        </mxCell>
        <mxCell id="-FcQdrV0vnWtqaeG2UPR-39" value="ambiguity" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="-438" y="4130" width="76" height="30" as="geometry" />
        </mxCell>
        <mxCell id="-FcQdrV0vnWtqaeG2UPR-40" value="alias" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="-436.5" y="4208" width="76" height="30" as="geometry" />
        </mxCell>
        <mxCell id="-FcQdrV0vnWtqaeG2UPR-43" value="CPU1如何正确的把数据同步给CPU2的cache" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="1689.75" y="3920" width="269" height="30" as="geometry" />
        </mxCell>
        <mxCell id="-FcQdrV0vnWtqaeG2UPR-44" value="1, CPU1写最新值到内存, 然后通知CPU2缓存失效, 让CPU2自己区读最新值&lt;br&gt;2, CPU1写最新值到内存, 并转发最新值给CPU2" style="text;html=1;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="1680" y="3960" width="414" height="50" as="geometry" />
        </mxCell>
        <mxCell id="-FcQdrV0vnWtqaeG2UPR-45" value="Cache Bank" style="rounded=0;whiteSpace=wrap;html=1;fontFamily=Helvetica;fontSize=11;fontColor=default;labelBackgroundColor=default;" parent="1" vertex="1">
          <mxGeometry x="2611.5" y="3480" width="100" height="40" as="geometry" />
        </mxCell>
        <mxCell id="-FcQdrV0vnWtqaeG2UPR-46" value="" style="rounded=0;whiteSpace=wrap;html=1;fontFamily=Helvetica;fontSize=11;fontColor=default;labelBackgroundColor=default;" parent="1" vertex="1">
          <mxGeometry x="2285" y="3567.5" width="119" height="30" as="geometry" />
        </mxCell>
        <mxCell id="-FcQdrV0vnWtqaeG2UPR-47" value="" style="rounded=0;whiteSpace=wrap;html=1;fontFamily=Helvetica;fontSize=11;fontColor=default;labelBackgroundColor=default;" parent="1" vertex="1">
          <mxGeometry x="2285" y="3597.5" width="119" height="30" as="geometry" />
        </mxCell>
        <mxCell id="-FcQdrV0vnWtqaeG2UPR-48" value="" style="rounded=0;whiteSpace=wrap;html=1;fontFamily=Helvetica;fontSize=11;fontColor=default;labelBackgroundColor=default;" parent="1" vertex="1">
          <mxGeometry x="2285" y="3627.5" width="119" height="30" as="geometry" />
        </mxCell>
        <mxCell id="-FcQdrV0vnWtqaeG2UPR-49" value="" style="rounded=0;whiteSpace=wrap;html=1;fontFamily=Helvetica;fontSize=11;fontColor=default;labelBackgroundColor=default;" parent="1" vertex="1">
          <mxGeometry x="2285" y="3657.5" width="119" height="30" as="geometry" />
        </mxCell>
        <mxCell id="-FcQdrV0vnWtqaeG2UPR-50" value="" style="rounded=0;whiteSpace=wrap;html=1;fontFamily=Helvetica;fontSize=11;fontColor=default;labelBackgroundColor=default;" parent="1" vertex="1">
          <mxGeometry x="2601.5" y="3567.5" width="119" height="30" as="geometry" />
        </mxCell>
        <mxCell id="-FcQdrV0vnWtqaeG2UPR-51" value="" style="rounded=0;whiteSpace=wrap;html=1;fontFamily=Helvetica;fontSize=11;fontColor=default;labelBackgroundColor=default;" parent="1" vertex="1">
          <mxGeometry x="2601.5" y="3597.5" width="119" height="30" as="geometry" />
        </mxCell>
        <mxCell id="-FcQdrV0vnWtqaeG2UPR-52" value="" style="rounded=0;whiteSpace=wrap;html=1;fontFamily=Helvetica;fontSize=11;fontColor=default;labelBackgroundColor=default;" parent="1" vertex="1">
          <mxGeometry x="2601.5" y="3627.5" width="119" height="30" as="geometry" />
        </mxCell>
        <mxCell id="-FcQdrV0vnWtqaeG2UPR-53" value="" style="rounded=0;whiteSpace=wrap;html=1;fontFamily=Helvetica;fontSize=11;fontColor=default;labelBackgroundColor=default;" parent="1" vertex="1">
          <mxGeometry x="2601.5" y="3657.5" width="119" height="30" as="geometry" />
        </mxCell>
        <mxCell id="-FcQdrV0vnWtqaeG2UPR-54" value="Cache Bank" style="rounded=0;whiteSpace=wrap;html=1;fontFamily=Helvetica;fontSize=11;fontColor=default;labelBackgroundColor=default;" parent="1" vertex="1">
          <mxGeometry x="2285" y="3480" width="100" height="40" as="geometry" />
        </mxCell>
        <mxCell id="-FcQdrV0vnWtqaeG2UPR-55" value="写屏障和读屏障需要配对使用, 写屏障保证了写出顺序, 读屏障保证了 数据可见" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontFamily=Helvetica;fontSize=15;fontColor=#FF0000;labelBackgroundColor=default;" parent="1" vertex="1">
          <mxGeometry x="2148.5" y="3870" width="319" height="40" as="geometry" />
        </mxCell>
        <mxCell id="-FcQdrV0vnWtqaeG2UPR-60" value="" style="edgeStyle=orthogonalEdgeStyle;shape=connector;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=default;align=center;verticalAlign=middle;fontFamily=Helvetica;fontSize=11;fontColor=default;labelBackgroundColor=default;endArrow=classic;" parent="1" source="-FcQdrV0vnWtqaeG2UPR-56" target="-FcQdrV0vnWtqaeG2UPR-59" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="-FcQdrV0vnWtqaeG2UPR-56" value="实际CPU中发生的情况可能是: CPU2读到了B的最新值, 但是没有读到A的最新值。&lt;br&gt;发生这种现象的原因是: CPU2的对于A的最新值不可见, i.e A的更新操作由于cache的繁忙没有及时更新到cache中, 导致CPU2对于这个最新值不可见。造成了一种指令重排序的错觉" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="1860" y="3723.75" width="444.5" height="62.5" as="geometry" />
        </mxCell>
        <mxCell id="-FcQdrV0vnWtqaeG2UPR-59" value="因此, 使用读屏障保证的是: 让CPU2的cache完成所有的更新操作(清除cache的操作队列, 保证后续无更新操作), 这样的操作就确保了更新A的操作一定落到了cache中, 对CPU2可见" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="2350" y="3723.75" width="444.5" height="62.5" as="geometry" />
        </mxCell>
        <mxCell id="-FcQdrV0vnWtqaeG2UPR-61" value="CPU1" style="rounded=0;whiteSpace=wrap;html=1;verticalAlign=top;" parent="1" vertex="1">
          <mxGeometry x="2370" y="4270" width="170" height="80" as="geometry" />
        </mxCell>
        <mxCell id="-FcQdrV0vnWtqaeG2UPR-64" value="Cache Line" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="2370" y="4350" width="170" height="40" as="geometry" />
        </mxCell>
        <mxCell id="-FcQdrV0vnWtqaeG2UPR-67" value="Memory" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="2370" y="4470" width="490" height="30" as="geometry" />
        </mxCell>
        <mxCell id="-FcQdrV0vnWtqaeG2UPR-68" value="CPU2" style="rounded=0;whiteSpace=wrap;html=1;verticalAlign=top;" parent="1" vertex="1">
          <mxGeometry x="2690" y="4270" width="170" height="80" as="geometry" />
        </mxCell>
        <mxCell id="-FcQdrV0vnWtqaeG2UPR-69" value="Cache Line" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="2690" y="4350" width="170" height="40" as="geometry" />
        </mxCell>
        <mxCell id="-FcQdrV0vnWtqaeG2UPR-71" value="MESI规则: 写变量时, 若缓存行中不存在改变量, 那么需要将该值先从内存中载入缓存行, 才能写入" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontFamily=Helvetica;fontSize=11;fontColor=default;labelBackgroundColor=default;" parent="1" vertex="1">
          <mxGeometry x="2870" y="4350" width="490" height="40" as="geometry" />
        </mxCell>
        <mxCell id="-FcQdrV0vnWtqaeG2UPR-72" value="Store Buffer" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="2370" y="4308" width="170" height="32" as="geometry" />
        </mxCell>
        <mxCell id="-FcQdrV0vnWtqaeG2UPR-76" value="" style="edgeStyle=orthogonalEdgeStyle;shape=connector;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=default;align=center;verticalAlign=middle;fontFamily=Helvetica;fontSize=11;fontColor=default;labelBackgroundColor=default;endArrow=classic;" parent="1" source="-FcQdrV0vnWtqaeG2UPR-73" target="-FcQdrV0vnWtqaeG2UPR-74" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="-FcQdrV0vnWtqaeG2UPR-73" value="流水线节点" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="2264.5" y="4150" width="110" height="40" as="geometry" />
        </mxCell>
        <mxCell id="-FcQdrV0vnWtqaeG2UPR-77" value="" style="edgeStyle=orthogonalEdgeStyle;shape=connector;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=default;align=center;verticalAlign=middle;fontFamily=Helvetica;fontSize=11;fontColor=default;labelBackgroundColor=default;endArrow=classic;" parent="1" source="-FcQdrV0vnWtqaeG2UPR-74" target="-FcQdrV0vnWtqaeG2UPR-75" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="-FcQdrV0vnWtqaeG2UPR-74" value="流水线节点" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="2419.5" y="4150" width="110" height="40" as="geometry" />
        </mxCell>
        <mxCell id="-FcQdrV0vnWtqaeG2UPR-79" style="edgeStyle=orthogonalEdgeStyle;shape=connector;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=1;entryY=0.5;entryDx=0;entryDy=0;strokeColor=default;align=center;verticalAlign=middle;fontFamily=Helvetica;fontSize=11;fontColor=default;labelBackgroundColor=default;endArrow=classic;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" parent="1" source="-FcQdrV0vnWtqaeG2UPR-75" target="-FcQdrV0vnWtqaeG2UPR-72" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="-FcQdrV0vnWtqaeG2UPR-75" value="流水线节点" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="2569" y="4150" width="110" height="40" as="geometry" />
        </mxCell>
        <mxCell id="-FcQdrV0vnWtqaeG2UPR-78" value="避免流水线写操作阻塞" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontFamily=Helvetica;fontSize=11;fontColor=default;labelBackgroundColor=default;" parent="1" vertex="1">
          <mxGeometry x="2491" y="4215" width="120" height="30" as="geometry" />
        </mxCell>
        <mxCell id="-FcQdrV0vnWtqaeG2UPR-80" value="A" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="2591" y="4110" width="30" height="30" as="geometry" />
        </mxCell>
        <mxCell id="-FcQdrV0vnWtqaeG2UPR-81" value="B" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="2638" y="4110" width="30" height="30" as="geometry" />
        </mxCell>
        <mxCell id="-FcQdrV0vnWtqaeG2UPR-82" value="引入StoreBuffer异步操作" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontFamily=Helvetica;fontSize=11;fontColor=default;labelBackgroundColor=default;" parent="1" vertex="1">
          <mxGeometry x="2632.5" y="4215" width="141.5" height="30" as="geometry" />
        </mxCell>
        <mxCell id="-FcQdrV0vnWtqaeG2UPR-83" value="Store Buffer" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="2690" y="4300" width="170" height="40" as="geometry" />
        </mxCell>
        <mxCell id="-FcQdrV0vnWtqaeG2UPR-84" value="Invalid Buffer" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="2370" y="4410" width="170" height="40" as="geometry" />
        </mxCell>
        <mxCell id="-FcQdrV0vnWtqaeG2UPR-123" style="edgeStyle=orthogonalEdgeStyle;shape=connector;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=default;align=center;verticalAlign=middle;fontFamily=Helvetica;fontSize=11;fontColor=default;labelBackgroundColor=default;endArrow=classic;" parent="1" source="-FcQdrV0vnWtqaeG2UPR-85" target="-FcQdrV0vnWtqaeG2UPR-122" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="-FcQdrV0vnWtqaeG2UPR-85" value="Invalid Buffer" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="2689.5" y="4410" width="170" height="40" as="geometry" />
        </mxCell>
        <mxCell id="-FcQdrV0vnWtqaeG2UPR-89" value="A" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#f8cecc;strokeColor=#b85450;" parent="1" vertex="1">
          <mxGeometry x="2870" y="4796.5" width="30" height="30" as="geometry" />
        </mxCell>
        <mxCell id="-FcQdrV0vnWtqaeG2UPR-90" value="B" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#f8cecc;strokeColor=#b85450;" parent="1" vertex="1">
          <mxGeometry x="3037" y="4798" width="30" height="30" as="geometry" />
        </mxCell>
        <mxCell id="-FcQdrV0vnWtqaeG2UPR-91" value="C" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#f8cecc;strokeColor=#b85450;" parent="1" vertex="1">
          <mxGeometry x="3090" y="4797" width="30" height="30" as="geometry" />
        </mxCell>
        <mxCell id="-FcQdrV0vnWtqaeG2UPR-92" value="D" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#f8cecc;strokeColor=#b85450;" parent="1" vertex="1">
          <mxGeometry x="3140" y="4798" width="27" height="27" as="geometry" />
        </mxCell>
        <mxCell id="-FcQdrV0vnWtqaeG2UPR-98" style="edgeStyle=orthogonalEdgeStyle;shape=connector;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;strokeColor=default;align=center;verticalAlign=middle;fontFamily=Helvetica;fontSize=11;fontColor=default;labelBackgroundColor=default;endArrow=classic;" parent="1" source="-FcQdrV0vnWtqaeG2UPR-94" target="-FcQdrV0vnWtqaeG2UPR-97" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="-FcQdrV0vnWtqaeG2UPR-94" value="数据依赖屏障" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="2915" y="4793" width="110" height="40" as="geometry" />
        </mxCell>
        <mxCell id="-FcQdrV0vnWtqaeG2UPR-96" value="" style="edgeStyle=orthogonalEdgeStyle;shape=connector;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=default;align=center;verticalAlign=middle;fontFamily=Helvetica;fontSize=11;fontColor=default;labelBackgroundColor=default;endArrow=classic;" parent="1" source="-FcQdrV0vnWtqaeG2UPR-95" target="-FcQdrV0vnWtqaeG2UPR-94" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="-FcQdrV0vnWtqaeG2UPR-95" value="内核定义的" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="2915" y="4728" width="110" height="40" as="geometry" />
        </mxCell>
        <mxCell id="-FcQdrV0vnWtqaeG2UPR-97" value="数据依赖屏障是简化版的读屏障, 它对存在分支的情况不管用, 如果依赖前后存在分支, 那么一定要使用读屏障" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontFamily=Helvetica;fontSize=11;fontColor=default;labelBackgroundColor=default;" parent="1" vertex="1">
          <mxGeometry x="2980" y="4884.5" width="171" height="60" as="geometry" />
        </mxCell>
        <mxCell id="-FcQdrV0vnWtqaeG2UPR-99" value="JUC 7,8节" style="rounded=0;whiteSpace=wrap;html=1;fontFamily=Helvetica;fontSize=11;fontColor=default;labelBackgroundColor=default;" parent="1" vertex="1">
          <mxGeometry x="725" y="2980" width="1145" height="50" as="geometry" />
        </mxCell>
        <mxCell id="-FcQdrV0vnWtqaeG2UPR-100" value="假设变量 a b c d&lt;br style=&quot;font-size: 12px;&quot;&gt;在Intel CPU中, 使用putOrdered保证a b c写入顺序(Release), 当访问了volatile变量d时, 会加上lock操作, 根据手册的内容, 将会把可能存在于store buffer中的变量按顺序刷出, 由于intel的store buffer不会发生乱序现象, 所以membar_release也即空操作" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontFamily=Helvetica;fontSize=12;fontColor=default;labelBackgroundColor=default;" parent="1" vertex="1">
          <mxGeometry x="3308" y="4125" width="408" height="90" as="geometry" />
        </mxCell>
        <mxCell id="-FcQdrV0vnWtqaeG2UPR-101" value="如果这个流水线发生写操作阻塞, 整个流水线就被阻塞" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontFamily=Helvetica;fontSize=11;fontColor=default;labelBackgroundColor=default;" parent="1" vertex="1">
          <mxGeometry x="2689.5" y="4150" width="170" height="40" as="geometry" />
        </mxCell>
        <mxCell id="-FcQdrV0vnWtqaeG2UPR-104" value="如果A在cache中, A直接写入cache&lt;br&gt;B不在cache中, B暂存到store buffer, 从内存中加载B到缓存行, 再把B从store buffer写出去" style="text;html=1;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontFamily=Helvetica;fontSize=11;fontColor=default;labelBackgroundColor=default;" parent="1" vertex="1">
          <mxGeometry x="2085" y="4260" width="225" height="40" as="geometry" />
        </mxCell>
        <mxCell id="-FcQdrV0vnWtqaeG2UPR-105" value="A" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="2565" y="4278" width="30" height="30" as="geometry" />
        </mxCell>
        <mxCell id="-FcQdrV0vnWtqaeG2UPR-106" value="B" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="2611.5" y="4278" width="30" height="30" as="geometry" />
        </mxCell>
        <mxCell id="-FcQdrV0vnWtqaeG2UPR-107" value="按顺序写A和B" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontFamily=Helvetica;fontSize=11;fontColor=default;labelBackgroundColor=default;" parent="1" vertex="1">
          <mxGeometry x="1960" y="4320" width="80" height="30" as="geometry" />
        </mxCell>
        <mxCell id="-FcQdrV0vnWtqaeG2UPR-109" value="如果A不在cache中, B在cache中, A和B都暂存到store buffer(不会直接写B), 从内存中加载A到缓存行, 再把A和B从store buffer写出去; 这A和B一起等的操作是Intel CPU的特性, 保证了写的顺序" style="text;html=1;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontFamily=Helvetica;fontSize=11;fontColor=default;labelBackgroundColor=default;" parent="1" vertex="1">
          <mxGeometry x="2083" y="4330" width="245" height="80" as="geometry" />
        </mxCell>
        <mxCell id="-FcQdrV0vnWtqaeG2UPR-110" style="edgeStyle=orthogonalEdgeStyle;shape=connector;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;strokeColor=default;align=center;verticalAlign=middle;fontFamily=Helvetica;fontSize=11;fontColor=default;labelBackgroundColor=default;endArrow=classic;" parent="1" source="-FcQdrV0vnWtqaeG2UPR-107" target="-FcQdrV0vnWtqaeG2UPR-107" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="-FcQdrV0vnWtqaeG2UPR-111" value="所以在JVM的中x86的store barrier为空操作" style="text;html=1;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontFamily=Helvetica;fontSize=11;fontColor=default;labelBackgroundColor=default;" parent="1" vertex="1">
          <mxGeometry x="2100" y="4405" width="245" height="30" as="geometry" />
        </mxCell>
        <mxCell id="-FcQdrV0vnWtqaeG2UPR-112" value="如果一个CPU的实现是, 在cache中的数据直接就写出去, e.g. 先写A再写B, B已经在cache中, 直接写B了, 这样就导致了写的顺序不对. 此时就需要store barrier" style="text;html=1;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontFamily=Helvetica;fontSize=11;fontColor=default;labelBackgroundColor=default;" parent="1" vertex="1">
          <mxGeometry x="2075" y="4498" width="245" height="80" as="geometry" />
        </mxCell>
        <mxCell id="-FcQdrV0vnWtqaeG2UPR-116" style="edgeStyle=orthogonalEdgeStyle;shape=connector;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=default;align=center;verticalAlign=middle;fontFamily=Helvetica;fontSize=11;fontColor=default;labelBackgroundColor=default;endArrow=classic;" parent="1" source="-FcQdrV0vnWtqaeG2UPR-113" target="-FcQdrV0vnWtqaeG2UPR-115" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="-FcQdrV0vnWtqaeG2UPR-113" value="MESI是一种cache coherency protocol, 那么2个cache之间通信是不是需要队列?" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontFamily=Helvetica;fontSize=11;fontColor=default;labelBackgroundColor=default;" parent="1" vertex="1">
          <mxGeometry x="2870" y="4405" width="410" height="40" as="geometry" />
        </mxCell>
        <mxCell id="-FcQdrV0vnWtqaeG2UPR-115" value="Invalid Queue" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="3110" y="4490" width="140" height="20" as="geometry" />
        </mxCell>
        <mxCell id="-FcQdrV0vnWtqaeG2UPR-117" value="A" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#f8cecc;strokeColor=#b85450;" parent="1" vertex="1">
          <mxGeometry x="2505" y="4415" width="30" height="30" as="geometry" />
        </mxCell>
        <mxCell id="-FcQdrV0vnWtqaeG2UPR-118" value="B" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#f8cecc;strokeColor=#b85450;" parent="1" vertex="1">
          <mxGeometry x="2548.75" y="4415" width="30" height="30" as="geometry" />
        </mxCell>
        <mxCell id="-FcQdrV0vnWtqaeG2UPR-119" value="A" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#f8cecc;strokeColor=#b85450;" parent="1" vertex="1">
          <mxGeometry x="2653.63" y="4415" width="30" height="30" as="geometry" />
        </mxCell>
        <mxCell id="-FcQdrV0vnWtqaeG2UPR-120" value="B" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#f8cecc;strokeColor=#b85450;" parent="1" vertex="1">
          <mxGeometry x="2697.38" y="4415" width="30" height="30" as="geometry" />
        </mxCell>
        <mxCell id="-FcQdrV0vnWtqaeG2UPR-122" value="当CPU2在Invalid Buffer中暂存了CPU1发来的数据, CPU2从里面取值的时候有没有可能是乱序的? 如果允许乱序, 那么就发生了读的乱序, 需要load barrier来限制; 在Intel CPU中, 这个Invalid Buffer的读取也是有序的, 所以JVM x86的load barrier也为空操作" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontFamily=Helvetica;fontSize=11;fontColor=default;labelBackgroundColor=default;" parent="1" vertex="1">
          <mxGeometry x="2505" y="4560" width="430" height="62" as="geometry" />
        </mxCell>
        <mxCell id="wvUFbZKzVNe_2dA4ze0a-4" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;curved=1;" parent="1" source="wvUFbZKzVNe_2dA4ze0a-1" target="wvUFbZKzVNe_2dA4ze0a-2" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="wvUFbZKzVNe_2dA4ze0a-1" value="内存乱序" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="3218.75" y="3070" width="95" height="37" as="geometry" />
        </mxCell>
        <mxCell id="wvUFbZKzVNe_2dA4ze0a-28" style="edgeStyle=orthogonalEdgeStyle;shape=connector;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;strokeColor=default;align=center;verticalAlign=middle;fontFamily=Helvetica;fontSize=11;fontColor=default;labelBackgroundColor=default;endArrow=classic;" parent="1" source="wvUFbZKzVNe_2dA4ze0a-2" target="wvUFbZKzVNe_2dA4ze0a-26" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="wvUFbZKzVNe_2dA4ze0a-29" style="edgeStyle=orthogonalEdgeStyle;shape=connector;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;strokeColor=default;align=center;verticalAlign=middle;fontFamily=Helvetica;fontSize=11;fontColor=default;labelBackgroundColor=default;endArrow=classic;" parent="1" source="wvUFbZKzVNe_2dA4ze0a-2" target="wvUFbZKzVNe_2dA4ze0a-27" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="wvUFbZKzVNe_2dA4ze0a-2" value="CPU (MOB)" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="3053.75" y="3164.5" width="95" height="37" as="geometry" />
        </mxCell>
        <mxCell id="wvUFbZKzVNe_2dA4ze0a-8" value="假设CPU1通知CPU2, 发送失效A, 失效B两个请求;&lt;br&gt;两个请求进入了Invalid Buffer&amp;nbsp;&lt;div&gt;CPU2先执行了LOAD A, LOAD B, 导致读到了旧值;&lt;br&gt;或者&lt;/div&gt;&lt;div&gt;CPU2先处理了失效A, 然后再LOAD A, 就读到A新值, B旧值&lt;br&gt;或者&lt;br&gt;CPU2处理了2个失效请求, 然后再LOAD, 就都读到了新值&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontFamily=Helvetica;fontSize=11;fontColor=default;labelBackgroundColor=default;" parent="1" vertex="1">
          <mxGeometry x="4050" y="4540" width="380" height="115" as="geometry" />
        </mxCell>
        <mxCell id="wvUFbZKzVNe_2dA4ze0a-9" value="CPU1" style="rounded=0;whiteSpace=wrap;html=1;verticalAlign=top;" parent="1" vertex="1">
          <mxGeometry x="3580" y="4545" width="170" height="80" as="geometry" />
        </mxCell>
        <mxCell id="wvUFbZKzVNe_2dA4ze0a-10" value="Cache Line" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="3580" y="4625" width="170" height="40" as="geometry" />
        </mxCell>
        <mxCell id="wvUFbZKzVNe_2dA4ze0a-11" value="CPU2" style="rounded=0;whiteSpace=wrap;html=1;verticalAlign=top;" parent="1" vertex="1">
          <mxGeometry x="3834" y="4545" width="170" height="80" as="geometry" />
        </mxCell>
        <mxCell id="wvUFbZKzVNe_2dA4ze0a-12" value="Cache Line" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="3834" y="4625" width="170" height="40" as="geometry" />
        </mxCell>
        <mxCell id="wvUFbZKzVNe_2dA4ze0a-13" value="Store Buffer" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="3580" y="4583" width="170" height="32" as="geometry" />
        </mxCell>
        <mxCell id="wvUFbZKzVNe_2dA4ze0a-14" value="Store Buffer" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="3834" y="4575" width="170" height="40" as="geometry" />
        </mxCell>
        <mxCell id="wvUFbZKzVNe_2dA4ze0a-15" value="Invalid Queue" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="3580" y="4685" width="170" height="40" as="geometry" />
        </mxCell>
        <mxCell id="wvUFbZKzVNe_2dA4ze0a-16" value="Invalid Queue" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="3833.5" y="4685" width="170" height="40" as="geometry" />
        </mxCell>
        <mxCell id="wvUFbZKzVNe_2dA4ze0a-42" style="edgeStyle=orthogonalEdgeStyle;shape=connector;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;strokeColor=default;align=center;verticalAlign=middle;fontFamily=Helvetica;fontSize=11;fontColor=default;labelBackgroundColor=default;endArrow=classic;" parent="1" source="wvUFbZKzVNe_2dA4ze0a-21" target="wvUFbZKzVNe_2dA4ze0a-16" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="wvUFbZKzVNe_2dA4ze0a-21" value="A" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#f8cecc;strokeColor=#b85450;" parent="1" vertex="1">
          <mxGeometry x="3750" y="4750" width="30" height="30" as="geometry" />
        </mxCell>
        <mxCell id="wvUFbZKzVNe_2dA4ze0a-22" value="B" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#f8cecc;strokeColor=#b85450;" parent="1" vertex="1">
          <mxGeometry x="3720" y="4750" width="30" height="30" as="geometry" />
        </mxCell>
        <mxCell id="wvUFbZKzVNe_2dA4ze0a-23" value="STORE A&lt;div&gt;STORE B&lt;/div&gt;&lt;div&gt;STORE C&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontFamily=Helvetica;fontSize=11;fontColor=default;labelBackgroundColor=default;" parent="1" vertex="1">
          <mxGeometry x="3635" y="4465" width="70" height="75" as="geometry" />
        </mxCell>
        <mxCell id="wvUFbZKzVNe_2dA4ze0a-24" value="load barrier就保证, 在LOAD A时, invalid queue会被清空, 所以当LOAD B时, 一定会拿到新值" style="text;html=1;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontFamily=Helvetica;fontSize=11;fontColor=default;labelBackgroundColor=default;" parent="1" vertex="1">
          <mxGeometry x="4050" y="4676" width="380" height="40" as="geometry" />
        </mxCell>
        <mxCell id="wvUFbZKzVNe_2dA4ze0a-26" value="写入乱序" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="2986.25" y="3240" width="95" height="37" as="geometry" />
        </mxCell>
        <mxCell id="wvUFbZKzVNe_2dA4ze0a-27" value="读取乱序" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="3099.75" y="3240" width="95" height="37" as="geometry" />
        </mxCell>
        <mxCell id="wvUFbZKzVNe_2dA4ze0a-31" value="这里的data dependency barrier只保证A和B的顺序, 对C和D无效" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontFamily=Helvetica;fontSize=11;fontColor=default;labelBackgroundColor=default;" parent="1" vertex="1">
          <mxGeometry x="2794.5" y="4844.5" width="171" height="40" as="geometry" />
        </mxCell>
        <mxCell id="wvUFbZKzVNe_2dA4ze0a-32" value="e.g. Store Buffer, Load Buffer, Invalid Buffer" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontFamily=Helvetica;fontSize=11;fontColor=default;labelBackgroundColor=default;" parent="1" vertex="1">
          <mxGeometry x="2916.25" y="3124.5" width="171" height="40" as="geometry" />
        </mxCell>
        <mxCell id="wvUFbZKzVNe_2dA4ze0a-40" style="edgeStyle=orthogonalEdgeStyle;shape=connector;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;strokeColor=default;align=center;verticalAlign=middle;fontFamily=Helvetica;fontSize=11;fontColor=default;labelBackgroundColor=default;endArrow=classic;" parent="1" source="wvUFbZKzVNe_2dA4ze0a-36" target="wvUFbZKzVNe_2dA4ze0a-13" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="wvUFbZKzVNe_2dA4ze0a-36" value="A" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="3460" y="4630" width="30" height="30" as="geometry" />
        </mxCell>
        <mxCell id="wvUFbZKzVNe_2dA4ze0a-37" value="B" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="3430" y="4630" width="30" height="30" as="geometry" />
        </mxCell>
        <mxCell id="wvUFbZKzVNe_2dA4ze0a-38" value="C" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="3350" y="4630" width="30" height="30" as="geometry" />
        </mxCell>
        <mxCell id="wvUFbZKzVNe_2dA4ze0a-39" value="C" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#f8cecc;strokeColor=#b85450;" parent="1" vertex="1">
          <mxGeometry x="3640" y="4750" width="30" height="30" as="geometry" />
        </mxCell>
        <mxCell id="wvUFbZKzVNe_2dA4ze0a-43" value="LOAD C&lt;div&gt;LOAD A&lt;/div&gt;&lt;div&gt;LOAD B&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontFamily=Helvetica;fontSize=11;fontColor=default;labelBackgroundColor=default;" parent="1" vertex="1">
          <mxGeometry x="3890" y="4465" width="70" height="75" as="geometry" />
        </mxCell>
        <mxCell id="wvUFbZKzVNe_2dA4ze0a-44" value="发布release" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontFamily=Helvetica;fontSize=11;fontColor=default;labelBackgroundColor=default;" parent="1" vertex="1">
          <mxGeometry x="3445" y="4665" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="wvUFbZKzVNe_2dA4ze0a-45" value="订阅acquire" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontFamily=Helvetica;fontSize=11;fontColor=default;labelBackgroundColor=default;" parent="1" vertex="1">
          <mxGeometry x="3735" y="4795" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="wvUFbZKzVNe_2dA4ze0a-47" value="初始A, B, C都等于0, 写A = 1, B = 1, C = 1; 读时, 要确保:如果C等于1, 那么A和B一定都等于1" style="text;html=1;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontFamily=Helvetica;fontSize=11;fontColor=default;labelBackgroundColor=default;" parent="1" vertex="1">
          <mxGeometry x="3585" y="4435" width="475" height="34" as="geometry" />
        </mxCell>
        <mxCell id="wvUFbZKzVNe_2dA4ze0a-51" style="edgeStyle=orthogonalEdgeStyle;shape=connector;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=default;align=center;verticalAlign=middle;fontFamily=Helvetica;fontSize=11;fontColor=default;labelBackgroundColor=default;endArrow=classic;" parent="1" source="wvUFbZKzVNe_2dA4ze0a-48" target="wvUFbZKzVNe_2dA4ze0a-50" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="wvUFbZKzVNe_2dA4ze0a-48" value="Store Barrier" style="rounded=0;whiteSpace=wrap;html=1;fontFamily=Helvetica;fontSize=11;fontColor=default;labelBackgroundColor=default;fillColor=#FFCC99;" parent="1" vertex="1">
          <mxGeometry x="3380" y="4630" width="50" height="30" as="geometry" />
        </mxCell>
        <mxCell id="wvUFbZKzVNe_2dA4ze0a-53" style="edgeStyle=orthogonalEdgeStyle;shape=connector;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=default;align=center;verticalAlign=middle;fontFamily=Helvetica;fontSize=11;fontColor=default;labelBackgroundColor=default;endArrow=classic;" parent="1" source="wvUFbZKzVNe_2dA4ze0a-49" target="wvUFbZKzVNe_2dA4ze0a-52" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="wvUFbZKzVNe_2dA4ze0a-49" value="Load Barrier" style="rounded=0;whiteSpace=wrap;html=1;fontFamily=Helvetica;fontSize=11;fontColor=default;labelBackgroundColor=default;fillColor=#FFCC99;" parent="1" vertex="1">
          <mxGeometry x="3670" y="4750" width="50" height="30" as="geometry" />
        </mxCell>
        <mxCell id="wvUFbZKzVNe_2dA4ze0a-50" value="确保了写操作在Store Buffer中的顺序" style="text;html=1;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontFamily=Helvetica;fontSize=11;fontColor=default;labelBackgroundColor=default;" parent="1" vertex="1">
          <mxGeometry x="3310" y="4720" width="190" height="38.5" as="geometry" />
        </mxCell>
        <mxCell id="wvUFbZKzVNe_2dA4ze0a-52" value="确保了CPU2在Load B时会明确知道失效自己的cache, 然后处理Invalid Queue的请求, 从而读取从CPU1同步或从内存读取最新的数据,所以CPU2会看到B和A的最新数据" style="text;html=1;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontFamily=Helvetica;fontSize=11;fontColor=default;labelBackgroundColor=default;" parent="1" vertex="1">
          <mxGeometry x="3627" y="4860" width="233" height="50" as="geometry" />
        </mxCell>
        <mxCell id="wvUFbZKzVNe_2dA4ze0a-56" style="edgeStyle=orthogonalEdgeStyle;shape=connector;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=default;align=center;verticalAlign=middle;fontFamily=Helvetica;fontSize=11;fontColor=default;labelBackgroundColor=default;endArrow=classic;" parent="1" source="wvUFbZKzVNe_2dA4ze0a-54" target="wvUFbZKzVNe_2dA4ze0a-55" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="wvUFbZKzVNe_2dA4ze0a-54" value="以上由于store buffer和invalid queue是MOB导致的乱序; CPU为了提升执行性能, 是允许乱序执行指令的; load a, load b, store c, load d =&amp;gt; load a, load b, load d, store c&amp;nbsp;" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontFamily=Helvetica;fontSize=11;fontColor=default;labelBackgroundColor=default;" parent="1" vertex="1">
          <mxGeometry x="3422" y="5020" width="358" height="50" as="geometry" />
        </mxCell>
        <mxCell id="wvUFbZKzVNe_2dA4ze0a-55" value="这个是真实的CPU乱序执行指令, 是最本质的指令乱序" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontFamily=Helvetica;fontSize=12;fontColor=default;labelBackgroundColor=default;fontStyle=1" parent="1" vertex="1">
          <mxGeometry x="3820" y="5030" width="300" height="30" as="geometry" />
        </mxCell>
        <mxCell id="wvUFbZKzVNe_2dA4ze0a-59" style="edgeStyle=orthogonalEdgeStyle;shape=connector;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;strokeColor=default;align=center;verticalAlign=middle;fontFamily=Helvetica;fontSize=11;fontColor=default;labelBackgroundColor=default;endArrow=classic;" parent="1" source="wvUFbZKzVNe_2dA4ze0a-57" target="wvUFbZKzVNe_2dA4ze0a-58" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="wvUFbZKzVNe_2dA4ze0a-57" value="" style="shape=image;verticalLabelPosition=bottom;labelBackgroundColor=default;verticalAlign=top;aspect=fixed;imageAspect=0;image=data:image/png,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;" parent="1" vertex="1">
          <mxGeometry x="3380" y="5110" width="663.08" height="20" as="geometry" />
        </mxCell>
        <mxCell id="wvUFbZKzVNe_2dA4ze0a-58" value="间接说明:对于Intel CPU, 锁, 序列化, 和io指令本身具备全屏障的作用" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontFamily=Helvetica;fontSize=11;fontColor=default;labelBackgroundColor=default;" parent="1" vertex="1">
          <mxGeometry x="3490" y="5200" width="250" height="30" as="geometry" />
        </mxCell>
        <mxCell id="wvUFbZKzVNe_2dA4ze0a-63" style="edgeStyle=orthogonalEdgeStyle;shape=connector;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=default;align=center;verticalAlign=middle;fontFamily=Helvetica;fontSize=11;fontColor=default;labelBackgroundColor=default;endArrow=classic;" parent="1" source="wvUFbZKzVNe_2dA4ze0a-60" target="wvUFbZKzVNe_2dA4ze0a-62" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="wvUFbZKzVNe_2dA4ze0a-60" value="软件开发" style="rounded=0;whiteSpace=wrap;html=1;fontFamily=Helvetica;fontSize=11;fontColor=default;labelBackgroundColor=default;" parent="1" vertex="1">
          <mxGeometry x="4310" y="4970" width="70" height="40" as="geometry" />
        </mxCell>
        <mxCell id="wvUFbZKzVNe_2dA4ze0a-61" value="执行结果" style="rounded=0;whiteSpace=wrap;html=1;fontFamily=Helvetica;fontSize=11;fontColor=default;labelBackgroundColor=default;" parent="1" vertex="1">
          <mxGeometry x="4590" y="4970" width="70" height="40" as="geometry" />
        </mxCell>
        <mxCell id="wvUFbZKzVNe_2dA4ze0a-64" style="edgeStyle=orthogonalEdgeStyle;shape=connector;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=default;align=center;verticalAlign=middle;fontFamily=Helvetica;fontSize=11;fontColor=default;labelBackgroundColor=default;endArrow=classic;" parent="1" source="wvUFbZKzVNe_2dA4ze0a-62" target="wvUFbZKzVNe_2dA4ze0a-61" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="wvUFbZKzVNe_2dA4ze0a-66" style="edgeStyle=orthogonalEdgeStyle;shape=connector;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=default;align=center;verticalAlign=middle;fontFamily=Helvetica;fontSize=11;fontColor=default;labelBackgroundColor=default;endArrow=classic;" parent="1" source="wvUFbZKzVNe_2dA4ze0a-62" target="wvUFbZKzVNe_2dA4ze0a-65" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="wvUFbZKzVNe_2dA4ze0a-62" value="一系列指令" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fontFamily=Helvetica;fontSize=11;fontColor=default;labelBackgroundColor=default;" parent="1" vertex="1">
          <mxGeometry x="4450" y="4950" width="80" height="80" as="geometry" />
        </mxCell>
        <mxCell id="wvUFbZKzVNe_2dA4ze0a-65" value="CPU乱序执行指令 Or MOB" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontFamily=Helvetica;fontSize=11;fontColor=default;labelBackgroundColor=default;" parent="1" vertex="1">
          <mxGeometry x="4445" y="5070" width="90" height="40" as="geometry" />
        </mxCell>
        <mxCell id="wvUFbZKzVNe_2dA4ze0a-67" value="STORE x" style="rounded=0;whiteSpace=wrap;html=1;fontFamily=Helvetica;fontSize=11;fontColor=default;labelBackgroundColor=default;" parent="1" vertex="1">
          <mxGeometry x="4570" y="5250" width="70" height="40" as="geometry" />
        </mxCell>
        <mxCell id="wvUFbZKzVNe_2dA4ze0a-68" value="STORE y" style="rounded=0;whiteSpace=wrap;html=1;fontFamily=Helvetica;fontSize=11;fontColor=default;labelBackgroundColor=default;" parent="1" vertex="1">
          <mxGeometry x="4640" y="5250" width="70" height="40" as="geometry" />
        </mxCell>
        <mxCell id="wvUFbZKzVNe_2dA4ze0a-69" value="Intel-64 memory-ordering model规定了, 单CPU上的write操作不会乱序; 所以Store x, Store y一定是按顺序发生;&amp;nbsp;&lt;br&gt;另一方面Intel的Store Buffer也保证: 后续的写操作要等前面的写操作执行完成, 才能执行写内存, 从而也保证了x的值一定先于y进入内存" style="text;html=1;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontFamily=Helvetica;fontSize=11;fontColor=default;labelBackgroundColor=default;" parent="1" vertex="1">
          <mxGeometry x="4530" y="5170" width="260" height="70" as="geometry" />
        </mxCell>
        <mxCell id="E4f6vcsmDczpbreKZe59-1" value="Cache Line" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-538" y="4060" width="220" height="30" as="geometry" />
        </mxCell>
        <mxCell id="E4f6vcsmDczpbreKZe59-2" value="Intel CPU保证了单处理器的指令执行顺序, 在多处理器的情况下, 每个CPU指令的相对顺序不会改变 (只会出现由于并发产生的穿插执行)" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontFamily=Helvetica;fontSize=11;fontColor=default;labelBackgroundColor=default;" parent="1" vertex="1">
          <mxGeometry x="4350" y="5320" width="321.75" height="49" as="geometry" />
        </mxCell>
        <mxCell id="E4f6vcsmDczpbreKZe59-3" value="缓存一致性协议" style="rounded=0;whiteSpace=wrap;html=1;fontFamily=Helvetica;fontSize=11;fontColor=default;labelBackgroundColor=default;" parent="1" vertex="1">
          <mxGeometry x="3795" y="5430" width="450" height="30" as="geometry" />
        </mxCell>
        <mxCell id="E4f6vcsmDczpbreKZe59-4" value="抽象模型 + 具体实现" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontFamily=Helvetica;fontSize=11;fontColor=default;labelBackgroundColor=default;" parent="1" vertex="1">
          <mxGeometry x="3885" y="5480" width="260" height="30" as="geometry" />
        </mxCell>
        <mxCell id="sthXmhu9q4Z8TcD6EFiC-1" value="若一个SMP系统中, CPU中存在缓存, 那么CPU必须实现多个CPU缓存的数据一致性, 不然会导致严重的问题" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontFamily=Helvetica;fontSize=11;fontColor=default;labelBackgroundColor=default;" vertex="1" parent="1">
          <mxGeometry x="3795" y="5570" width="310" height="30" as="geometry" />
        </mxCell>
        <mxCell id="sthXmhu9q4Z8TcD6EFiC-3" value="若多个处理器同时修改一个cache line, CPU的一致性协议会自己处理这个冲突, 给cache line上锁" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontFamily=Helvetica;fontSize=11;fontColor=default;labelBackgroundColor=default;" vertex="1" parent="1">
          <mxGeometry x="3795" y="5630" width="310" height="30" as="geometry" />
        </mxCell>
        <mxCell id="sthXmhu9q4Z8TcD6EFiC-6" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;curved=1;" edge="1" parent="1" source="sthXmhu9q4Z8TcD6EFiC-4" target="sthXmhu9q4Z8TcD6EFiC-5">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="sthXmhu9q4Z8TcD6EFiC-4" value="Write Propogation criteria" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontFamily=Helvetica;fontSize=11;fontColor=default;labelBackgroundColor=default;" vertex="1" parent="1">
          <mxGeometry x="4145" y="5560" width="140" height="30" as="geometry" />
        </mxCell>
        <mxCell id="sthXmhu9q4Z8TcD6EFiC-8" style="edgeStyle=orthogonalEdgeStyle;shape=connector;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=default;align=center;verticalAlign=middle;fontFamily=Helvetica;fontSize=11;fontColor=default;labelBackgroundColor=default;endArrow=classic;" edge="1" parent="1" source="sthXmhu9q4Z8TcD6EFiC-5" target="sthXmhu9q4Z8TcD6EFiC-7">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="sthXmhu9q4Z8TcD6EFiC-5" value="理想情况下: 缓存一致性可以实现, 写了就马上传播, 且马上成功;&amp;nbsp;&lt;br&gt;但是现实很骨感" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontFamily=Helvetica;fontSize=11;fontColor=default;labelBackgroundColor=default;" vertex="1" parent="1">
          <mxGeometry x="4175" y="5660" width="340" height="30" as="geometry" />
        </mxCell>
        <mxCell id="sthXmhu9q4Z8TcD6EFiC-13" style="edgeStyle=orthogonalEdgeStyle;shape=connector;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;strokeColor=default;align=center;verticalAlign=middle;fontFamily=Helvetica;fontSize=11;fontColor=default;labelBackgroundColor=default;endArrow=classic;" edge="1" parent="1" source="sthXmhu9q4Z8TcD6EFiC-7" target="sthXmhu9q4Z8TcD6EFiC-10">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="sthXmhu9q4Z8TcD6EFiC-14" style="edgeStyle=orthogonalEdgeStyle;shape=connector;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=default;align=center;verticalAlign=middle;fontFamily=Helvetica;fontSize=11;fontColor=default;labelBackgroundColor=default;endArrow=classic;" edge="1" parent="1" source="sthXmhu9q4Z8TcD6EFiC-7" target="sthXmhu9q4Z8TcD6EFiC-11">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="sthXmhu9q4Z8TcD6EFiC-15" style="edgeStyle=orthogonalEdgeStyle;shape=connector;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=default;align=center;verticalAlign=middle;fontFamily=Helvetica;fontSize=11;fontColor=default;labelBackgroundColor=default;endArrow=classic;" edge="1" parent="1" source="sthXmhu9q4Z8TcD6EFiC-7" target="sthXmhu9q4Z8TcD6EFiC-12">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="sthXmhu9q4Z8TcD6EFiC-7" value="BASE理论" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontFamily=Helvetica;fontSize=11;fontColor=default;labelBackgroundColor=default;" vertex="1" parent="1">
          <mxGeometry x="4605" y="5660" width="70" height="30" as="geometry" />
        </mxCell>
        <mxCell id="sthXmhu9q4Z8TcD6EFiC-10" value="Basically Available" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontFamily=Helvetica;fontSize=11;fontColor=default;labelBackgroundColor=default;" vertex="1" parent="1">
          <mxGeometry x="4745" y="5600" width="70" height="30" as="geometry" />
        </mxCell>
        <mxCell id="sthXmhu9q4Z8TcD6EFiC-11" value="Soft State" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontFamily=Helvetica;fontSize=11;fontColor=default;labelBackgroundColor=default;" vertex="1" parent="1">
          <mxGeometry x="4745" y="5640" width="70" height="30" as="geometry" />
        </mxCell>
        <mxCell id="sthXmhu9q4Z8TcD6EFiC-12" value="Eventually Consistent" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontFamily=Helvetica;fontSize=11;fontColor=default;labelBackgroundColor=default;" vertex="1" parent="1">
          <mxGeometry x="4745" y="5690" width="70" height="30" as="geometry" />
        </mxCell>
        <mxCell id="sthXmhu9q4Z8TcD6EFiC-16" value="CPU1" style="rounded=0;whiteSpace=wrap;html=1;fontFamily=Helvetica;fontSize=11;fontColor=default;labelBackgroundColor=default;" vertex="1" parent="1">
          <mxGeometry x="4365" y="5760" width="70" height="40" as="geometry" />
        </mxCell>
        <mxCell id="sthXmhu9q4Z8TcD6EFiC-17" value="CPU2" style="rounded=0;whiteSpace=wrap;html=1;fontFamily=Helvetica;fontSize=11;fontColor=default;labelBackgroundColor=default;" vertex="1" parent="1">
          <mxGeometry x="4474" y="5760" width="70" height="40" as="geometry" />
        </mxCell>
        <mxCell id="sthXmhu9q4Z8TcD6EFiC-18" value="CPU3" style="rounded=0;whiteSpace=wrap;html=1;fontFamily=Helvetica;fontSize=11;fontColor=default;labelBackgroundColor=default;" vertex="1" parent="1">
          <mxGeometry x="4585" y="5760" width="70" height="40" as="geometry" />
        </mxCell>
        <mxCell id="sthXmhu9q4Z8TcD6EFiC-19" value="CPU4" style="rounded=0;whiteSpace=wrap;html=1;fontFamily=Helvetica;fontSize=11;fontColor=default;labelBackgroundColor=default;" vertex="1" parent="1">
          <mxGeometry x="4695" y="5760" width="70" height="40" as="geometry" />
        </mxCell>
        <mxCell id="sthXmhu9q4Z8TcD6EFiC-24" style="edgeStyle=orthogonalEdgeStyle;shape=connector;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=default;align=center;verticalAlign=middle;fontFamily=Helvetica;fontSize=11;fontColor=default;labelBackgroundColor=default;endArrow=classic;" edge="1" parent="1" source="sthXmhu9q4Z8TcD6EFiC-20" target="sthXmhu9q4Z8TcD6EFiC-21">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="sthXmhu9q4Z8TcD6EFiC-20" value="store a = 10" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontFamily=Helvetica;fontSize=11;fontColor=default;labelBackgroundColor=default;" vertex="1" parent="1">
          <mxGeometry x="4365" y="5810" width="70" height="30" as="geometry" />
        </mxCell>
        <mxCell id="sthXmhu9q4Z8TcD6EFiC-21" value="store a = 20" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontFamily=Helvetica;fontSize=11;fontColor=default;labelBackgroundColor=default;" vertex="1" parent="1">
          <mxGeometry x="4474" y="5810" width="70" height="30" as="geometry" />
        </mxCell>
        <mxCell id="sthXmhu9q4Z8TcD6EFiC-22" value="load a = 10" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontFamily=Helvetica;fontSize=11;fontColor=default;labelBackgroundColor=default;" vertex="1" parent="1">
          <mxGeometry x="4585" y="5810" width="70" height="30" as="geometry" />
        </mxCell>
        <mxCell id="sthXmhu9q4Z8TcD6EFiC-23" value="load a = 20" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontFamily=Helvetica;fontSize=11;fontColor=default;labelBackgroundColor=default;" vertex="1" parent="1">
          <mxGeometry x="4695" y="5810" width="70" height="30" as="geometry" />
        </mxCell>
        <mxCell id="sthXmhu9q4Z8TcD6EFiC-25" value="CPU3没有处理完invalid queue的所有消息&lt;br&gt;CPU4处理了整个invalid queue" style="text;html=1;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontFamily=Helvetica;fontSize=11;fontColor=default;labelBackgroundColor=default;" vertex="1" parent="1">
          <mxGeometry x="4585" y="5875" width="220" height="45" as="geometry" />
        </mxCell>
        <mxCell id="sthXmhu9q4Z8TcD6EFiC-27" value="" style="shape=curlyBracket;whiteSpace=wrap;html=1;rounded=1;flipH=1;labelPosition=right;verticalLabelPosition=middle;align=left;verticalAlign=middle;fontFamily=Helvetica;fontSize=11;fontColor=default;labelBackgroundColor=default;rotation=90;size=0.5;" vertex="1" parent="1">
          <mxGeometry x="4666.75" y="5800" width="20" height="120" as="geometry" />
        </mxCell>
        <mxCell id="sthXmhu9q4Z8TcD6EFiC-28" value="CPU1" style="rounded=0;whiteSpace=wrap;html=1;fontFamily=Helvetica;fontSize=11;fontColor=default;labelBackgroundColor=default;" vertex="1" parent="1">
          <mxGeometry x="4370" y="5940" width="70" height="40" as="geometry" />
        </mxCell>
        <mxCell id="sthXmhu9q4Z8TcD6EFiC-29" value="CPU2" style="rounded=0;whiteSpace=wrap;html=1;fontFamily=Helvetica;fontSize=11;fontColor=default;labelBackgroundColor=default;" vertex="1" parent="1">
          <mxGeometry x="4479" y="5940" width="70" height="40" as="geometry" />
        </mxCell>
        <mxCell id="sthXmhu9q4Z8TcD6EFiC-30" value="CPU3" style="rounded=0;whiteSpace=wrap;html=1;fontFamily=Helvetica;fontSize=11;fontColor=default;labelBackgroundColor=default;" vertex="1" parent="1">
          <mxGeometry x="4590" y="5940" width="70" height="40" as="geometry" />
        </mxCell>
        <mxCell id="sthXmhu9q4Z8TcD6EFiC-31" value="CPU4" style="rounded=0;whiteSpace=wrap;html=1;fontFamily=Helvetica;fontSize=11;fontColor=default;labelBackgroundColor=default;" vertex="1" parent="1">
          <mxGeometry x="4700" y="5940" width="70" height="40" as="geometry" />
        </mxCell>
        <mxCell id="sthXmhu9q4Z8TcD6EFiC-32" style="edgeStyle=orthogonalEdgeStyle;shape=connector;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=default;align=center;verticalAlign=middle;fontFamily=Helvetica;fontSize=11;fontColor=default;labelBackgroundColor=default;endArrow=classic;" edge="1" parent="1" source="sthXmhu9q4Z8TcD6EFiC-33" target="sthXmhu9q4Z8TcD6EFiC-34">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="sthXmhu9q4Z8TcD6EFiC-33" value="store a = 10" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontFamily=Helvetica;fontSize=11;fontColor=default;labelBackgroundColor=default;" vertex="1" parent="1">
          <mxGeometry x="4370" y="5990" width="70" height="30" as="geometry" />
        </mxCell>
        <mxCell id="sthXmhu9q4Z8TcD6EFiC-34" value="store a = 20" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontFamily=Helvetica;fontSize=11;fontColor=default;labelBackgroundColor=default;" vertex="1" parent="1">
          <mxGeometry x="4479" y="5990" width="70" height="30" as="geometry" />
        </mxCell>
        <mxCell id="sthXmhu9q4Z8TcD6EFiC-35" value="load a = 10" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontFamily=Helvetica;fontSize=11;fontColor=default;labelBackgroundColor=default;" vertex="1" parent="1">
          <mxGeometry x="4590" y="5990" width="70" height="30" as="geometry" />
        </mxCell>
        <mxCell id="sthXmhu9q4Z8TcD6EFiC-36" value="load a = 20" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontFamily=Helvetica;fontSize=11;fontColor=default;labelBackgroundColor=default;" vertex="1" parent="1">
          <mxGeometry x="4700" y="5990" width="70" height="30" as="geometry" />
        </mxCell>
        <mxCell id="sthXmhu9q4Z8TcD6EFiC-37" value="如果CPU1和CPU2向内存同一区域分别store A = 10和store A = 20, 缓存一致性协议必须保证这个写入顺序" style="text;html=1;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontFamily=Helvetica;fontSize=11;fontColor=default;labelBackgroundColor=default;" vertex="1" parent="1">
          <mxGeometry x="4350" y="6040" width="330" height="50" as="geometry" />
        </mxCell>
        <mxCell id="sthXmhu9q4Z8TcD6EFiC-38" value="" style="shape=curlyBracket;whiteSpace=wrap;html=1;rounded=1;flipH=1;labelPosition=right;verticalLabelPosition=middle;align=left;verticalAlign=middle;fontFamily=Helvetica;fontSize=11;fontColor=default;labelBackgroundColor=default;rotation=90;size=0.5;" vertex="1" parent="1">
          <mxGeometry x="4445" y="5970" width="20" height="120" as="geometry" />
        </mxCell>
        <mxCell id="sthXmhu9q4Z8TcD6EFiC-101" style="edgeStyle=orthogonalEdgeStyle;shape=connector;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;strokeColor=default;align=center;verticalAlign=middle;fontFamily=Helvetica;fontSize=11;fontColor=default;labelBackgroundColor=default;endArrow=classic;" edge="1" parent="1" source="sthXmhu9q4Z8TcD6EFiC-40" target="sthXmhu9q4Z8TcD6EFiC-100">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="sthXmhu9q4Z8TcD6EFiC-103" style="edgeStyle=orthogonalEdgeStyle;shape=connector;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=1;entryY=0.5;entryDx=0;entryDy=0;strokeColor=default;align=center;verticalAlign=middle;fontFamily=Helvetica;fontSize=11;fontColor=default;labelBackgroundColor=default;endArrow=classic;" edge="1" parent="1" source="sthXmhu9q4Z8TcD6EFiC-40" target="sthXmhu9q4Z8TcD6EFiC-102">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="sthXmhu9q4Z8TcD6EFiC-40" value="Snooping" style="rounded=0;whiteSpace=wrap;html=1;fontFamily=Helvetica;fontSize=11;fontColor=default;labelBackgroundColor=default;" vertex="1" parent="1">
          <mxGeometry x="3973.08" y="6220" width="70" height="40" as="geometry" />
        </mxCell>
        <mxCell id="sthXmhu9q4Z8TcD6EFiC-57" style="edgeStyle=orthogonalEdgeStyle;shape=connector;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=default;align=center;verticalAlign=middle;fontFamily=Helvetica;fontSize=11;fontColor=default;labelBackgroundColor=default;endArrow=classic;" edge="1" parent="1" source="sthXmhu9q4Z8TcD6EFiC-52" target="sthXmhu9q4Z8TcD6EFiC-53">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="sthXmhu9q4Z8TcD6EFiC-52" value="CPU1 缓存" style="rounded=0;whiteSpace=wrap;html=1;fontFamily=Helvetica;fontSize=11;fontColor=default;labelBackgroundColor=default;" vertex="1" parent="1">
          <mxGeometry x="4135" y="6190" width="70" height="40" as="geometry" />
        </mxCell>
        <mxCell id="sthXmhu9q4Z8TcD6EFiC-58" style="edgeStyle=orthogonalEdgeStyle;shape=connector;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=default;align=center;verticalAlign=middle;fontFamily=Helvetica;fontSize=11;fontColor=default;labelBackgroundColor=default;endArrow=classic;" edge="1" parent="1" source="sthXmhu9q4Z8TcD6EFiC-53" target="sthXmhu9q4Z8TcD6EFiC-54">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="sthXmhu9q4Z8TcD6EFiC-53" value="CPU2 缓存" style="rounded=0;whiteSpace=wrap;html=1;fontFamily=Helvetica;fontSize=11;fontColor=default;labelBackgroundColor=default;" vertex="1" parent="1">
          <mxGeometry x="4280" y="6190" width="70" height="40" as="geometry" />
        </mxCell>
        <mxCell id="sthXmhu9q4Z8TcD6EFiC-60" style="edgeStyle=orthogonalEdgeStyle;shape=connector;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=1;entryDx=0;entryDy=0;strokeColor=default;align=center;verticalAlign=middle;fontFamily=Helvetica;fontSize=11;fontColor=default;labelBackgroundColor=default;endArrow=classic;" edge="1" parent="1" source="sthXmhu9q4Z8TcD6EFiC-54" target="sthXmhu9q4Z8TcD6EFiC-52">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="4465" y="6280" />
              <mxPoint x="4170" y="6280" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="sthXmhu9q4Z8TcD6EFiC-54" value="CPU3 缓存" style="rounded=0;whiteSpace=wrap;html=1;fontFamily=Helvetica;fontSize=11;fontColor=default;labelBackgroundColor=default;" vertex="1" parent="1">
          <mxGeometry x="4430" y="6190" width="70" height="40" as="geometry" />
        </mxCell>
        <mxCell id="sthXmhu9q4Z8TcD6EFiC-62" value="" style="edgeStyle=orthogonalEdgeStyle;shape=connector;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=default;align=center;verticalAlign=middle;fontFamily=Helvetica;fontSize=11;fontColor=default;labelBackgroundColor=default;endArrow=classic;" edge="1" parent="1" source="sthXmhu9q4Z8TcD6EFiC-59" target="sthXmhu9q4Z8TcD6EFiC-61">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="sthXmhu9q4Z8TcD6EFiC-59" value="将所有缓存连接到CPU片内总线(on-chip bus)上, 进行缓存行访问snooping" style="text;html=1;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontFamily=Helvetica;fontSize=11;fontColor=default;labelBackgroundColor=default;" vertex="1" parent="1">
          <mxGeometry x="4165" y="6290" width="295" height="30" as="geometry" />
        </mxCell>
        <mxCell id="sthXmhu9q4Z8TcD6EFiC-61" value="Intel CPU没有invalid queue, 都是直接观测, 自我修改&lt;br&gt;所以不需要read barrier来处理invalid queue" style="text;html=1;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontFamily=Helvetica;fontSize=11;fontColor=default;labelBackgroundColor=default;" vertex="1" parent="1">
          <mxGeometry x="4180" y="6350" width="265" height="30" as="geometry" />
        </mxCell>
        <mxCell id="sthXmhu9q4Z8TcD6EFiC-64" value="Write-invalidate" style="text;html=1;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontFamily=Helvetica;fontSize=11;fontColor=default;labelBackgroundColor=default;" vertex="1" parent="1">
          <mxGeometry x="4575" y="6165" width="100" height="30" as="geometry" />
        </mxCell>
        <mxCell id="sthXmhu9q4Z8TcD6EFiC-65" value="Write-update" style="text;html=1;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontFamily=Helvetica;fontSize=11;fontColor=default;labelBackgroundColor=default;" vertex="1" parent="1">
          <mxGeometry x="4575" y="6215" width="100" height="30" as="geometry" />
        </mxCell>
        <mxCell id="sthXmhu9q4Z8TcD6EFiC-66" value="强制下一次read获取最新值" style="text;html=1;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontFamily=Helvetica;fontSize=11;fontColor=default;labelBackgroundColor=default;" vertex="1" parent="1">
          <mxGeometry x="4675" y="6165" width="100" height="30" as="geometry" />
        </mxCell>
        <mxCell id="sthXmhu9q4Z8TcD6EFiC-67" value="实时更新最新值" style="text;html=1;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontFamily=Helvetica;fontSize=11;fontColor=default;labelBackgroundColor=default;" vertex="1" parent="1">
          <mxGeometry x="4675" y="6215" width="100" height="30" as="geometry" />
        </mxCell>
        <mxCell id="sthXmhu9q4Z8TcD6EFiC-68" value="Physical Memory" style="rounded=0;whiteSpace=wrap;html=1;fontFamily=Helvetica;fontSize=11;fontColor=default;labelBackgroundColor=default;" vertex="1" parent="1">
          <mxGeometry x="4110" y="6460" width="60" height="190" as="geometry" />
        </mxCell>
        <mxCell id="sthXmhu9q4Z8TcD6EFiC-71" style="edgeStyle=orthogonalEdgeStyle;shape=connector;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=default;align=center;verticalAlign=middle;fontFamily=Helvetica;fontSize=11;fontColor=default;labelBackgroundColor=default;endArrow=classic;" edge="1" parent="1" source="sthXmhu9q4Z8TcD6EFiC-69" target="sthXmhu9q4Z8TcD6EFiC-70">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="sthXmhu9q4Z8TcD6EFiC-69" value="MTRR" style="rounded=0;whiteSpace=wrap;html=1;fontFamily=Helvetica;fontSize=11;fontColor=default;labelBackgroundColor=default;" vertex="1" parent="1">
          <mxGeometry x="4270" y="6530" width="70" height="40" as="geometry" />
        </mxCell>
        <mxCell id="sthXmhu9q4Z8TcD6EFiC-70" value="可以指定哪一段内存区域用哪个模型&lt;br&gt;是write back还是write through, 还是uncachable" style="text;html=1;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontFamily=Helvetica;fontSize=11;fontColor=default;labelBackgroundColor=default;" vertex="1" parent="1">
          <mxGeometry x="4390" y="6527.5" width="180" height="45" as="geometry" />
        </mxCell>
        <mxCell id="sthXmhu9q4Z8TcD6EFiC-73" value="write through在写入内存时, 数据要传输到内存, 所以会占用内存总线周期, 从而导致总线利用率下降" style="text;html=1;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontFamily=Helvetica;fontSize=11;fontColor=default;labelBackgroundColor=default;" vertex="1" parent="1">
          <mxGeometry x="4260" y="6610" width="380" height="30" as="geometry" />
        </mxCell>
        <mxCell id="sthXmhu9q4Z8TcD6EFiC-76" value="Memory" style="rounded=0;whiteSpace=wrap;html=1;fontFamily=Helvetica;fontSize=11;fontColor=default;labelBackgroundColor=default;" vertex="1" parent="1">
          <mxGeometry x="3708.5" y="6480" width="70" height="40" as="geometry" />
        </mxCell>
        <mxCell id="sthXmhu9q4Z8TcD6EFiC-80" style="edgeStyle=orthogonalEdgeStyle;shape=connector;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=default;align=center;verticalAlign=middle;fontFamily=Helvetica;fontSize=11;fontColor=default;labelBackgroundColor=default;endArrow=classic;" edge="1" parent="1" source="sthXmhu9q4Z8TcD6EFiC-77" target="sthXmhu9q4Z8TcD6EFiC-79">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="sthXmhu9q4Z8TcD6EFiC-77" value="缓存行是否会发生数据冲突? 是的&lt;br&gt;若发生冲突, 新的数据要写入, 老的数据怎么办?" style="text;html=1;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontFamily=Helvetica;fontSize=11;fontColor=default;labelBackgroundColor=default;" vertex="1" parent="1">
          <mxGeometry x="3432.75" y="6389" width="237.25" height="30" as="geometry" />
        </mxCell>
        <mxCell id="sthXmhu9q4Z8TcD6EFiC-78" value="Writeback" style="text;html=1;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontFamily=Helvetica;fontSize=11;fontColor=default;labelBackgroundColor=default;" vertex="1" parent="1">
          <mxGeometry x="3442" y="6320" width="54" height="30" as="geometry" />
        </mxCell>
        <mxCell id="sthXmhu9q4Z8TcD6EFiC-82" style="edgeStyle=orthogonalEdgeStyle;shape=connector;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=default;align=center;verticalAlign=middle;fontFamily=Helvetica;fontSize=11;fontColor=default;labelBackgroundColor=default;endArrow=classic;" edge="1" parent="1" source="sthXmhu9q4Z8TcD6EFiC-79" target="sthXmhu9q4Z8TcD6EFiC-81">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="sthXmhu9q4Z8TcD6EFiC-79" value="dirty flag, 如果当前识别为脏缓存行, 要把缓存数据刷进内存" style="text;html=1;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontFamily=Helvetica;fontSize=11;fontColor=default;labelBackgroundColor=default;" vertex="1" parent="1">
          <mxGeometry x="3387.75" y="6474" width="290" height="30" as="geometry" />
        </mxCell>
        <mxCell id="sthXmhu9q4Z8TcD6EFiC-85" value="" style="edgeStyle=orthogonalEdgeStyle;shape=connector;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=default;align=center;verticalAlign=middle;fontFamily=Helvetica;fontSize=11;fontColor=default;labelBackgroundColor=default;endArrow=classic;" edge="1" parent="1" source="sthXmhu9q4Z8TcD6EFiC-81" target="sthXmhu9q4Z8TcD6EFiC-84">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="sthXmhu9q4Z8TcD6EFiC-81" value="Linux PageCache 与页回收的关系" style="text;html=1;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontFamily=Helvetica;fontSize=11;fontColor=default;labelBackgroundColor=default;" vertex="1" parent="1">
          <mxGeometry x="3157.75" y="6454" width="168.75" height="30" as="geometry" />
        </mxCell>
        <mxCell id="sthXmhu9q4Z8TcD6EFiC-132" style="edgeStyle=orthogonalEdgeStyle;shape=connector;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=default;align=center;verticalAlign=middle;fontFamily=Helvetica;fontSize=11;fontColor=default;labelBackgroundColor=default;endArrow=classic;" edge="1" parent="1" source="sthXmhu9q4Z8TcD6EFiC-84" target="sthXmhu9q4Z8TcD6EFiC-116">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="sthXmhu9q4Z8TcD6EFiC-84" value="Linux内存管理, 涉及到swapd" style="text;html=1;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontFamily=Helvetica;fontSize=11;fontColor=default;labelBackgroundColor=default;" vertex="1" parent="1">
          <mxGeometry x="3157.75" y="6509" width="168.75" height="30" as="geometry" />
        </mxCell>
        <mxCell id="sthXmhu9q4Z8TcD6EFiC-86" value="CPU" style="rounded=0;whiteSpace=wrap;html=1;fontFamily=Helvetica;fontSize=11;fontColor=default;labelBackgroundColor=default;" vertex="1" parent="1">
          <mxGeometry x="3708.5" y="6370" width="70" height="40" as="geometry" />
        </mxCell>
        <mxCell id="sthXmhu9q4Z8TcD6EFiC-87" value="缓存" style="rounded=0;whiteSpace=wrap;html=1;fontFamily=Helvetica;fontSize=11;fontColor=default;labelBackgroundColor=default;" vertex="1" parent="1">
          <mxGeometry x="3708.5" y="6410" width="70" height="40" as="geometry" />
        </mxCell>
        <mxCell id="sthXmhu9q4Z8TcD6EFiC-88" value="CPU" style="rounded=0;whiteSpace=wrap;html=1;fontFamily=Helvetica;fontSize=11;fontColor=default;labelBackgroundColor=default;" vertex="1" parent="1">
          <mxGeometry x="3382" y="6650" width="70" height="40" as="geometry" />
        </mxCell>
        <mxCell id="sthXmhu9q4Z8TcD6EFiC-89" value="缓存" style="rounded=0;whiteSpace=wrap;html=1;fontFamily=Helvetica;fontSize=11;fontColor=default;labelBackgroundColor=default;" vertex="1" parent="1">
          <mxGeometry x="3382" y="6690" width="70" height="30" as="geometry" />
        </mxCell>
        <mxCell id="sthXmhu9q4Z8TcD6EFiC-90" value="CPU" style="rounded=0;whiteSpace=wrap;html=1;fontFamily=Helvetica;fontSize=11;fontColor=default;labelBackgroundColor=default;" vertex="1" parent="1">
          <mxGeometry x="3527" y="6650" width="70" height="40" as="geometry" />
        </mxCell>
        <mxCell id="sthXmhu9q4Z8TcD6EFiC-91" value="缓存" style="rounded=0;whiteSpace=wrap;html=1;fontFamily=Helvetica;fontSize=11;fontColor=default;labelBackgroundColor=default;" vertex="1" parent="1">
          <mxGeometry x="3527" y="6690" width="70" height="30" as="geometry" />
        </mxCell>
        <mxCell id="sthXmhu9q4Z8TcD6EFiC-94" style="edgeStyle=orthogonalEdgeStyle;shape=connector;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=default;align=center;verticalAlign=middle;fontFamily=Helvetica;fontSize=11;fontColor=default;labelBackgroundColor=default;endArrow=classic;" edge="1" parent="1" source="sthXmhu9q4Z8TcD6EFiC-92" target="sthXmhu9q4Z8TcD6EFiC-91">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="sthXmhu9q4Z8TcD6EFiC-92" value="data" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fontFamily=Helvetica;fontSize=11;labelBackgroundColor=default;fillColor=#f8cecc;strokeColor=#b85450;" vertex="1" parent="1">
          <mxGeometry x="3429" y="6685" width="40" height="40" as="geometry" />
        </mxCell>
        <mxCell id="sthXmhu9q4Z8TcD6EFiC-99" style="edgeStyle=orthogonalEdgeStyle;shape=connector;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;strokeColor=default;align=center;verticalAlign=middle;fontFamily=Helvetica;fontSize=11;fontColor=default;labelBackgroundColor=default;endArrow=classic;" edge="1" parent="1" source="sthXmhu9q4Z8TcD6EFiC-93" target="sthXmhu9q4Z8TcD6EFiC-96">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="sthXmhu9q4Z8TcD6EFiC-93" value="一个CPU的cache数据可以转发到另一个CPU的cache中" style="text;html=1;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontFamily=Helvetica;fontSize=11;fontColor=default;labelBackgroundColor=default;" vertex="1" parent="1">
          <mxGeometry x="3360" y="6725" width="276" height="30" as="geometry" />
        </mxCell>
        <mxCell id="sthXmhu9q4Z8TcD6EFiC-95" value="Memory" style="rounded=0;whiteSpace=wrap;html=1;fontFamily=Helvetica;fontSize=11;fontColor=default;labelBackgroundColor=default;" vertex="1" parent="1">
          <mxGeometry x="3387" y="6755" width="215" height="25" as="geometry" />
        </mxCell>
        <mxCell id="sthXmhu9q4Z8TcD6EFiC-96" value="减少了内存的介入和memory bus的traffic" style="text;html=1;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontFamily=Helvetica;fontSize=11;fontColor=default;labelBackgroundColor=default;" vertex="1" parent="1">
          <mxGeometry x="3692" y="6740" width="208" height="30" as="geometry" />
        </mxCell>
        <mxCell id="sthXmhu9q4Z8TcD6EFiC-105" style="edgeStyle=orthogonalEdgeStyle;shape=connector;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=1;entryY=0.5;entryDx=0;entryDy=0;strokeColor=default;align=center;verticalAlign=middle;fontFamily=Helvetica;fontSize=11;fontColor=default;labelBackgroundColor=default;endArrow=classic;" edge="1" parent="1" source="sthXmhu9q4Z8TcD6EFiC-102" target="sthXmhu9q4Z8TcD6EFiC-104">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="sthXmhu9q4Z8TcD6EFiC-102" value="网络安全相关" style="text;html=1;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontFamily=Helvetica;fontSize=11;fontColor=default;labelBackgroundColor=default;" vertex="1" parent="1">
          <mxGeometry x="3835.46" y="6190" width="75" height="30" as="geometry" />
        </mxCell>
        <mxCell id="sthXmhu9q4Z8TcD6EFiC-104" value="扫描 + 嗅探" style="text;html=1;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontFamily=Helvetica;fontSize=11;fontColor=default;labelBackgroundColor=default;" vertex="1" parent="1">
          <mxGeometry x="3728.5" y="6160" width="66.5" height="30" as="geometry" />
        </mxCell>
        <mxCell id="sthXmhu9q4Z8TcD6EFiC-108" value="MESI" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontFamily=Helvetica;fontSize=11;fontColor=default;labelBackgroundColor=default;" vertex="1" parent="1">
          <mxGeometry x="3602" y="7000" width="41" height="30" as="geometry" />
        </mxCell>
        <mxCell id="sthXmhu9q4Z8TcD6EFiC-109" value="缓存一致性协议" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontFamily=Helvetica;fontSize=11;fontColor=default;labelBackgroundColor=default;" vertex="1" parent="1">
          <mxGeometry x="3573.5" y="6930" width="107" height="30" as="geometry" />
        </mxCell>
        <mxCell id="sthXmhu9q4Z8TcD6EFiC-110" value="Modified" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontFamily=Helvetica;fontSize=11;fontColor=default;labelBackgroundColor=default;" vertex="1" parent="1">
          <mxGeometry x="3734.75" y="6940" width="41" height="30" as="geometry" />
        </mxCell>
        <mxCell id="sthXmhu9q4Z8TcD6EFiC-111" value="Exclusive" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontFamily=Helvetica;fontSize=11;fontColor=default;labelBackgroundColor=default;" vertex="1" parent="1">
          <mxGeometry x="3735" y="6980" width="41" height="30" as="geometry" />
        </mxCell>
        <mxCell id="sthXmhu9q4Z8TcD6EFiC-112" value="Shared" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontFamily=Helvetica;fontSize=11;fontColor=default;labelBackgroundColor=default;" vertex="1" parent="1">
          <mxGeometry x="3734.75" y="7020" width="41" height="30" as="geometry" />
        </mxCell>
        <mxCell id="sthXmhu9q4Z8TcD6EFiC-113" value="Invalid" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontFamily=Helvetica;fontSize=11;fontColor=default;labelBackgroundColor=default;" vertex="1" parent="1">
          <mxGeometry x="3734.75" y="7060" width="41" height="30" as="geometry" />
        </mxCell>
        <mxCell id="sthXmhu9q4Z8TcD6EFiC-114" value="由于Intel cpu的MESI协议使用snooping, 于是不需要使用invalida queue, 简化了上面讲的cpu抽象模型" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontFamily=Helvetica;fontSize=11;fontColor=default;labelBackgroundColor=default;" vertex="1" parent="1">
          <mxGeometry x="3573.5" y="7110" width="261.96" height="50" as="geometry" />
        </mxCell>
        <mxCell id="sthXmhu9q4Z8TcD6EFiC-119" style="edgeStyle=orthogonalEdgeStyle;shape=connector;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=1;entryY=0.5;entryDx=0;entryDy=0;strokeColor=default;align=center;verticalAlign=middle;fontFamily=Helvetica;fontSize=11;fontColor=default;labelBackgroundColor=default;endArrow=classic;" edge="1" parent="1" source="sthXmhu9q4Z8TcD6EFiC-116" target="sthXmhu9q4Z8TcD6EFiC-118">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="sthXmhu9q4Z8TcD6EFiC-116" value="Swap Space" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontFamily=Helvetica;fontSize=11;fontColor=default;labelBackgroundColor=default;" vertex="1" parent="1">
          <mxGeometry x="3050" y="6510" width="68.5" height="30" as="geometry" />
        </mxCell>
        <mxCell id="sthXmhu9q4Z8TcD6EFiC-118" value="Swap Storm" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontFamily=Helvetica;fontSize=11;fontColor=#FF3333;labelBackgroundColor=default;" vertex="1" parent="1">
          <mxGeometry x="2920" y="6455" width="80" height="30" as="geometry" />
        </mxCell>
        <mxCell id="sthXmhu9q4Z8TcD6EFiC-120" value="如果频繁发生Cache Thrashing, 那么说明缓存行被频繁的换进换出内存, 那么此时可以采用的: huge pages, 减少PTE的数量, 增加了TLB缓存命中率, 减少了page fault, 减少page的换进换出" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontFamily=Helvetica;fontSize=11;fontColor=default;labelBackgroundColor=default;" vertex="1" parent="1">
          <mxGeometry x="2788" y="6590" width="322" height="60" as="geometry" />
        </mxCell>
        <mxCell id="sthXmhu9q4Z8TcD6EFiC-121" value="这个是软件层面的优化, 通过缓存行填充, 避免2个变量共享一个缓存行导致的False Sharing" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontFamily=Helvetica;fontSize=11;fontColor=default;labelBackgroundColor=default;" vertex="1" parent="1">
          <mxGeometry x="2745" y="6880" width="322" height="40" as="geometry" />
        </mxCell>
        <mxCell id="sthXmhu9q4Z8TcD6EFiC-127" style="edgeStyle=orthogonalEdgeStyle;shape=connector;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=default;align=center;verticalAlign=middle;fontFamily=Helvetica;fontSize=11;fontColor=default;labelBackgroundColor=default;endArrow=classic;" edge="1" parent="1" source="sthXmhu9q4Z8TcD6EFiC-122" target="sthXmhu9q4Z8TcD6EFiC-124">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="sthXmhu9q4Z8TcD6EFiC-122" value="Intel CPU的cache line fill" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontFamily=Helvetica;fontSize=11;fontColor=default;labelBackgroundColor=default;" vertex="1" parent="1">
          <mxGeometry x="2526.25" y="6830" width="143.75" height="30" as="geometry" />
        </mxCell>
        <mxCell id="sthXmhu9q4Z8TcD6EFiC-128" style="edgeStyle=orthogonalEdgeStyle;shape=connector;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=default;align=center;verticalAlign=middle;fontFamily=Helvetica;fontSize=11;fontColor=default;labelBackgroundColor=default;endArrow=classic;" edge="1" parent="1" source="sthXmhu9q4Z8TcD6EFiC-123" target="sthXmhu9q4Z8TcD6EFiC-121">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="sthXmhu9q4Z8TcD6EFiC-123" value="软件层面的cache line fill" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontFamily=Helvetica;fontSize=11;fontColor=default;labelBackgroundColor=default;" vertex="1" parent="1">
          <mxGeometry x="2529.5" y="6885" width="136.25" height="30" as="geometry" />
        </mxCell>
        <mxCell id="sthXmhu9q4Z8TcD6EFiC-124" value="这个指的是cpu会利用spatial locality, 从内存中读取数据时, 会读一定量的数据(e.g. 64 bytes)填满一个cache line" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontFamily=Helvetica;fontSize=11;fontColor=default;labelBackgroundColor=default;" vertex="1" parent="1">
          <mxGeometry x="2745" y="6825" width="322" height="40" as="geometry" />
        </mxCell>
        <mxCell id="sthXmhu9q4Z8TcD6EFiC-125" value="False Sharing意思是: 2个或多个线程共享一个缓存行, 但是它们却访问更新缓存行中的不同数据, 导致缓存一致性协议频繁产生线程所属CPU缓存的同步更新" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontFamily=Helvetica;fontSize=11;fontColor=#FF0000;labelBackgroundColor=default;" vertex="1" parent="1">
          <mxGeometry x="2679" y="6935" width="468.5" height="40" as="geometry" />
        </mxCell>
        <mxCell id="sthXmhu9q4Z8TcD6EFiC-129" value="Memory Controller" style="rounded=0;whiteSpace=wrap;html=1;fontFamily=Helvetica;fontSize=11;fontColor=default;labelBackgroundColor=default;" vertex="1" parent="1">
          <mxGeometry x="3947.5" y="6310" width="120" height="30" as="geometry" />
        </mxCell>
        <mxCell id="sthXmhu9q4Z8TcD6EFiC-130" value="Integrated Memory Controller (IMC)" style="text;html=1;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontFamily=Helvetica;fontSize=11;fontColor=default;labelBackgroundColor=default;" vertex="1" parent="1">
          <mxGeometry x="3919.33" y="6340" width="177.5" height="30" as="geometry" />
        </mxCell>
        <mxCell id="sthXmhu9q4Z8TcD6EFiC-136" style="edgeStyle=orthogonalEdgeStyle;shape=connector;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;strokeColor=default;align=center;verticalAlign=middle;fontFamily=Helvetica;fontSize=11;fontColor=default;labelBackgroundColor=default;endArrow=classic;" edge="1" parent="1" source="sthXmhu9q4Z8TcD6EFiC-133" target="sthXmhu9q4Z8TcD6EFiC-134">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="sthXmhu9q4Z8TcD6EFiC-137" style="edgeStyle=orthogonalEdgeStyle;shape=connector;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;strokeColor=default;align=center;verticalAlign=middle;fontFamily=Helvetica;fontSize=11;fontColor=default;labelBackgroundColor=default;endArrow=classic;" edge="1" parent="1" source="sthXmhu9q4Z8TcD6EFiC-133" target="sthXmhu9q4Z8TcD6EFiC-135">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="sthXmhu9q4Z8TcD6EFiC-133" value="CPU乱序" style="rounded=0;whiteSpace=wrap;html=1;fontFamily=Helvetica;fontSize=11;fontColor=default;labelBackgroundColor=default;" vertex="1" parent="1">
          <mxGeometry x="591" y="3842.5" width="100.25" height="40" as="geometry" />
        </mxCell>
        <mxCell id="sthXmhu9q4Z8TcD6EFiC-134" value="MOB乱序" style="rounded=0;whiteSpace=wrap;html=1;fontFamily=Helvetica;fontSize=11;fontColor=default;labelBackgroundColor=default;" vertex="1" parent="1">
          <mxGeometry x="798.75" y="3786.25" width="100.25" height="40" as="geometry" />
        </mxCell>
        <mxCell id="sthXmhu9q4Z8TcD6EFiC-135" value="CPU执行乱序" style="rounded=0;whiteSpace=wrap;html=1;fontFamily=Helvetica;fontSize=11;fontColor=default;labelBackgroundColor=default;" vertex="1" parent="1">
          <mxGeometry x="798.75" y="3906.25" width="100.25" height="40" as="geometry" />
        </mxCell>
        <mxCell id="sthXmhu9q4Z8TcD6EFiC-141" style="edgeStyle=orthogonalEdgeStyle;shape=connector;curved=1;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.254;entryDx=0;entryDy=0;entryPerimeter=0;strokeColor=default;align=center;verticalAlign=middle;fontFamily=Helvetica;fontSize=11;fontColor=default;labelBackgroundColor=default;endArrow=classic;" edge="1" parent="1" source="sthXmhu9q4Z8TcD6EFiC-134" target="sthXmhu9q4Z8TcD6EFiC-140">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
